<UserControl
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:TrboX"
             xmlns:System="clr-namespace:System;assembly=mscorlib" 
			 xmlns:gif="clr-namespace:GifImageLib;assembly=GifImageLib"
             xmlns:Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero" x:Class="TrboX.FastPanel"
             mc:Ignorable="d"
             d:DesignHeight="300" d:DesignWidth="300" Width="240">
    <UserControl.Resources>
        <local:FastPanelTypeConverter x:Key="TypeToColor" />
        <local:FastPanelTitleConverter x:Key="TypeToTitle" />
        <local:FastPanelItemConverter x:Key="TypeToItem" />
        <local:MonitorConverter x:Key="IsMonitor" />
        <local:NullHideConverter x:Key="NullHide" />

        <local:ItemIconConverter x:Key="TypeToIcon" />


        <local:ContactTypeItemConverter x:Key="ContactTypeToItem" />
        <Style x:Key="ComboButtonSCtrl" TargetType="{x:Type local:ComboButton}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type local:ComboButton}">
                        <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="True">
                            <ContentPresenter ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" ContentStringFormat="{TemplateBinding ContentStringFormat}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <EventTrigger RoutedEvent="FrameworkElement.Loaded"/>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ComboButtonStyleNormal" TargetType="{x:Type local:ComboButton}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type local:ComboButton}">
                        <Border Padding="{TemplateBinding Padding}" SnapsToDevicePixels="True" Background="White" BorderThickness="1" BorderBrush="#FF040000">
                            <ContentPresenter ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" ContentStringFormat="{TemplateBinding ContentStringFormat}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True"/>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="CheckBoxStylePTT" TargetType="{x:Type CheckBox}">
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
            <Setter Property="Background" Value="{StaticResource CheckBoxFillNormal}"/>
            <Setter Property="BorderBrush" Value="{StaticResource CheckBoxStroke}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FocusVisualStyle" Value="{StaticResource EmptyCheckBoxFocusVisual}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type CheckBox}">
                        <Border Background="#FFFFFF00" BorderThickness="0" HorizontalAlignment="Left" Height="30" VerticalAlignment="Top" Width="130" >
                            <Label Content="PTT" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="HasContent" Value="true">
                                <Setter Property="FocusVisualStyle" Value="{StaticResource CheckRadioFocusVisual}"/>
                                <Setter Property="Padding" Value="4,0,0,0"/>
                            </Trigger>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                                <Setter Property="Background" Value="#FFFFFF00"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </UserControl.Resources>
    <!--Simple Tree View - 这用来在 ScrollViewer 中对 TreeViewItems 进行布局 -->

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Border Background="{Binding m_Type, Converter={StaticResource TypeToColor}}" BorderThickness="0">
            <DockPanel LastChildFill="False">
                <Label Content="{Binding m_Type, Converter={StaticResource TypeToTitle}}" VerticalAlignment="Center"/>
                <Button x:Name="btn_Close" Content="x" VerticalAlignment="Center" DockPanel.Dock="Right" HorizontalAlignment="Center" Margin="0,0,5,0" Height="20" Width="20" Click="btn_Close_Click"/>
            </DockPanel>
        </Border>
        <Border BorderBrush="Black" BorderThickness="0" Grid.RowSpan="3" Grid.Row="1" ClipToBounds="True" Padding="10,0,10,10" Background="#8021EEAD">
            <TabControl SelectedIndex="{Binding m_Type, Converter={StaticResource TypeToItem}}" Style="{DynamicResource TabControlStyleNormal}" Margin="0,-22,0,0" BorderThickness="0">
                <TabItem Header="TabItem">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="100"/>
                            <RowDefinition Height="29*"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="90"/>
                            <ColumnDefinition Width="131*"/>
                        </Grid.ColumnDefinitions>
                        <Border BorderBrush="Black" BorderThickness="1" Height="80" VerticalAlignment="Top" Margin="0,10,0,0" Width="80" HorizontalAlignment="Left">
                            <Border.Background>
                                <ImageBrush>
                                    <ImageBrush.ImageSource>
                                        <MultiBinding  Converter="{StaticResource TypeToIcon}">
                                            <Binding  Path="m_Type" />
                                            <Binding  Path="m_Contact.key" />
                                            <Binding  Path="m_Operate.type" />
                                        </MultiBinding>
                                    </ImageBrush.ImageSource>
                                </ImageBrush>
                            </Border.Background>
                        </Border>
                        <Border BorderBrush="Black" BorderThickness="0" Grid.RowSpan="2" Grid.Column="1">
                            <TabControl SelectedIndex="{Binding m_Contact.key, Converter={StaticResource ContactTypeToItem}}" Style="{DynamicResource TabControlStyleNormal}" Margin="0,-22,0,0" BorderThickness="0">
                                <TabItem x:Name="group" Header="TabItem" Width="10" VerticalAlignment="Top">
                                    <DockPanel LastChildFill="False">
                                        <TextBlock TextWrapping="Wrap" Text="组" VerticalAlignment="Top" DockPanel.Dock="Top" Margin="0,10,0,0" FontSize="16"/>
                                        <TextBlock TextWrapping="Wrap" Text="{Binding m_Contact.group.name, StringFormat=名称：\{0\}}" VerticalAlignment="Top" DockPanel.Dock="Top" Margin="0,2,0,0" FontSize="16"/>
                                        <Separator Height="10" Margin="0" DockPanel.Dock="Top"/>
                                        <TextBlock TextWrapping="Wrap" Text="{Binding m_Contact.group.group_id, StringFormat=ID：\{0\}}" VerticalAlignment="Top" DockPanel.Dock="Top"/>
                                    </DockPanel>
                                </TabItem>
                                <TabItem x:Name="employee" Header="TabItem" Margin="0,-2,-2,0" Width="10" VerticalAlignment="Top">
                                    <DockPanel LastChildFill="False">
                                        <TextBlock TextWrapping="Wrap" Text="联系人" VerticalAlignment="Top" DockPanel.Dock="Top" Margin="0,10,0,0" FontSize="16"/>
                                        <TextBlock TextWrapping="Wrap" Text="{Binding m_Contact.employee.name, StringFormat=姓名：\{0\}}" VerticalAlignment="Top" DockPanel.Dock="Top" Margin="0,2,0,0" FontSize="16"/>
                                        <Separator Height="10" Margin="0" DockPanel.Dock="Top"/>
                                        <TextBlock TextWrapping="Wrap"  VerticalAlignment="Top" DockPanel.Dock="Top" Visibility="{Binding m_Contact.group, Converter={StaticResource NullHide}}" Margin="0,2">
                                            <TextBlock.Text>
                                                <MultiBinding StringFormat="组： {0}（ID：{1}）">
                                                    <Binding Path="m_Contact.group.name" />
                                                    <Binding Path="m_Contact.group.group_id" />
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                        <TextBlock TextWrapping="Wrap" Text="{Binding m_Contact.vehicle.number, StringFormat=车辆：\{0\}}" VerticalAlignment="Top" DockPanel.Dock="Top"  Visibility="{Binding m_Contact.vehicle, Converter={StaticResource NullHide}}" Margin="0,2"/>
                                        <TextBlock TextWrapping="Wrap" Text="{Binding m_Contact.radio.type, StringFormat=终端类型：\{0\}}" VerticalAlignment="Top" DockPanel.Dock="Top"  Visibility="{Binding m_Contact.radio, Converter={StaticResource NullHide}}" Margin="0,2"/>
                                        <TextBlock TextWrapping="Wrap" Text="{Binding m_Contact.radio.radio_id, StringFormat=终端ID：\{0\}}" VerticalAlignment="Top" DockPanel.Dock="Top"  Visibility="{Binding m_Contact.radio, Converter={StaticResource NullHide}}" Margin="0,2"/>


                                    </DockPanel>
                                </TabItem>
                                <TabItem x:Name="vehicle" Header="TabItem" Margin="0,-2,65,0" Width="10" VerticalAlignment="Top">
                                    <DockPanel LastChildFill="False">
                                        <TextBlock TextWrapping="Wrap" Text="车辆" VerticalAlignment="Top" DockPanel.Dock="Top" Margin="0,10,0,0" FontSize="16"/>
                                        <TextBlock TextWrapping="Wrap" Text="{Binding m_Contact.vehicle.number, StringFormat=车牌：\{0\}}" VerticalAlignment="Top" DockPanel.Dock="Top" Margin="0,2,0,0" FontSize="16"/>
                                        <Separator Height="10" Margin="0" DockPanel.Dock="Top"/>
                                        <TextBlock TextWrapping="Wrap"  VerticalAlignment="Top" DockPanel.Dock="Top" Visibility="{Binding m_Contact.group, Converter={StaticResource NullHide}}" Margin="0,2">
                                            <TextBlock.Text>
                                                <MultiBinding StringFormat="组： {0}（ID：{1}）">
                                                    <Binding Path="m_Contact.group.name" />
                                                    <Binding Path="m_Contact.group.group_id" />
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                        <TextBlock TextWrapping="Wrap" Text="{Binding m_Contact.employee.number, StringFormat=联系人：\{0\}}" VerticalAlignment="Top" DockPanel.Dock="Top"  Visibility="{Binding m_Contact.vehicle, Converter={StaticResource NullHide}}" Margin="0,2"/>
                                        <TextBlock TextWrapping="Wrap" Text="{Binding m_Contact.radio.type, StringFormat=终端类型：\{0\}}" VerticalAlignment="Top" DockPanel.Dock="Top"  Visibility="{Binding m_Contact.radio, Converter={StaticResource NullHide}}" Margin="0,2"/>
                                        <TextBlock TextWrapping="Wrap" Text="{Binding m_Contact.radio.radio_id, StringFormat=终端ID：\{0\}}" VerticalAlignment="Top" DockPanel.Dock="Top"  Visibility="{Binding m_Contact.radio, Converter={StaticResource NullHide}}" Margin="0,2"/>
                                    </DockPanel>
                                </TabItem>
                                <TabItem x:Name="ride" Header="TabItem" Margin="0,-2,0,0" Width="10" VerticalAlignment="Top">
                                    <DockPanel LastChildFill="False">
                                        <TextBlock TextWrapping="Wrap" Text="车载台" VerticalAlignment="Top" DockPanel.Dock="Top" Margin="0,10,0,0" FontSize="16"/>
                                        <TextBlock TextWrapping="Wrap" Text="{Binding m_Contact.radio.radio_id, StringFormat=ID:\{0\}}" VerticalAlignment="Top" DockPanel.Dock="Top" Margin="0,2,0,0" FontSize="16"/>
                                        <Separator Height="10" Margin="0" DockPanel.Dock="Top"/>
                                        <TextBlock TextWrapping="Wrap"  VerticalAlignment="Top" DockPanel.Dock="Top" Visibility="{Binding m_Contact.group, Converter={StaticResource NullHide}}" Margin="0,2">
                                            <TextBlock.Text>
                                                <MultiBinding StringFormat="组： {0}（ID：{1}）">
                                                    <Binding Path="m_Contact.group.name" />
                                                    <Binding Path="m_Contact.group.group_id" />
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                        <TextBlock TextWrapping="Wrap" Text="{Binding m_Contact.employee.number, StringFormat=联系人：\{0\}}" VerticalAlignment="Top" DockPanel.Dock="Top"  Visibility="{Binding m_Contact.vehicle, Converter={StaticResource NullHide}}" Margin="0,2"/>
                                        <TextBlock TextWrapping="Wrap" Text="{Binding m_Contact.vehicle.number, StringFormat=车辆：\{0\}}" VerticalAlignment="Top" DockPanel.Dock="Top"  Visibility="{Binding m_Contact.radio, Converter={StaticResource NullHide}}" Margin="0,2"/>
                                    </DockPanel>
                                </TabItem>
                                <TabItem x:Name="radio" Header="TabItem" Margin="0,-2,0,0" Width="10" VerticalAlignment="Top">
                                    <DockPanel LastChildFill="False">
                                        <TextBlock TextWrapping="Wrap" Text="手持台" VerticalAlignment="Top" DockPanel.Dock="Top" Margin="0,10,0,0" FontSize="16"/>
                                        <TextBlock TextWrapping="Wrap" Text="{Binding m_Contact.radio.radio_id, StringFormat=ID:\{0\}}" VerticalAlignment="Top" DockPanel.Dock="Top" Margin="0,2,0,0" FontSize="16"/>
                                        <Separator Height="10" Margin="0" DockPanel.Dock="Top"/>
                                        <TextBlock TextWrapping="Wrap"  VerticalAlignment="Top" DockPanel.Dock="Top" Visibility="{Binding m_Contact.group, Converter={StaticResource NullHide}}" Margin="0,2">
                                            <TextBlock.Text>
                                                <MultiBinding StringFormat="组： {0}（ID：{1}）">
                                                    <Binding Path="m_Contact.group.name" />
                                                    <Binding Path="m_Contact.group.group_id" />
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                        <TextBlock TextWrapping="Wrap" Text="{Binding m_Contact.employee.number, StringFormat=联系人：\{0\}}" VerticalAlignment="Top" DockPanel.Dock="Top"  Visibility="{Binding m_Contact.vehicle, Converter={StaticResource NullHide}}" Margin="0,2"/>
                                        <TextBlock TextWrapping="Wrap" Text="{Binding m_Contact.vehicle.number, StringFormat=车辆：\{0\}}" VerticalAlignment="Top" DockPanel.Dock="Top"  Visibility="{Binding m_Contact.radio, Converter={StaticResource NullHide}}" Margin="0,2"/>

                                    </DockPanel>
                                </TabItem>
                            </TabControl>
                        </Border>
                        <DockPanel LastChildFill="False" Grid.Row="1" Width="80" HorizontalAlignment="Left">
                            <Button Content="在线检测" Margin="0,0,0,3" DockPanel.Dock="Top" ToolTip="在线检测"/>
                            <Button Content="远程监听" Margin="0,0,0,3" DockPanel.Dock="Top" ToolTip="远程监听" Visibility="{Binding m_Contact.key, Converter={StaticResource IsMonitor}}"/>
                            <Button Content="呼叫" Margin="0,0,0,3" DockPanel.Dock="Top" ToolTip="呼叫"/>
                            <Button Content="短消息" Margin="0,0,0,3" DockPanel.Dock="Top" ToolTip="短消息"/>
                            <Button Content="位置查询" Margin="0,0,0,3" DockPanel.Dock="Top"  ToolTip="位置查询"/>
                            <local:ComboButton Content="遥毙" Height="20" VerticalAlignment="Top" DockPanel.Dock="Top" Margin="0,0,0,3" Background="White">
                                <local:ComboButton.Items>
                                    <ComboBoxItem Content="遥开"/>
                                    <ComboBoxItem Content="遥晕"/>
                                    <ComboBoxItem Content="遥醒"/>
                                </local:ComboButton.Items>
                            </local:ComboButton>
                            <Button Content="工单" Margin="0" DockPanel.Dock="Top" Cursor="" ToolTip="工单"/>
                        </DockPanel>
                    </Grid>
                </TabItem>
                <TabItem Header="TabItem">
                    <Grid>
                        <Border BorderBrush="Black" BorderThickness="1" Height="80" VerticalAlignment="Top" Margin="0,10,0,0" Width="80" HorizontalAlignment="Left">
                            <Border.Background>
                                <ImageBrush>
                                    <ImageBrush.ImageSource>
                                        <MultiBinding  Converter="{StaticResource TypeToIcon}">
                                            <Binding  Path="m_Type" />
                                            <Binding  Path="m_Contact.key" />
                                            <Binding  Path="m_Operate.type" />
                                        </MultiBinding>
                                    </ImageBrush.ImageSource>
                                </ImageBrush>
                            </Border.Background>
                        </Border>
                        <Border BorderBrush="Black" BorderThickness="0" Grid.RowSpan="2" Grid.Column="1" Grid.ColumnSpan="2">
                            <TabControl SelectedIndex="{Binding m_Contact.key, Converter={StaticResource ContactTypeToItem}}" Style="{DynamicResource TabControlStyleNormal}" Margin="0,-22,0,0" BorderThickness="0">
                                <TabItem x:Name="dispatch" Header="TabItem" Width="10" VerticalAlignment="Top">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="100"/>
                                            <RowDefinition Height="29*"/>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="131*"/>
                                        </Grid.ColumnDefinitions>
                                        <gif:GifImage Source="/TrboX;component/themes/resource/dispatch.gif" Stretch="Uniform" Grid.Row="1" Margin="0,0,0,30"/>
                                        <DockPanel LastChildFill="False" Grid.Column="1" Grid.RowSpan="2">
                                            <TextBlock TextWrapping="Wrap" Text="呼叫" VerticalAlignment="Top" FontSize="16" Margin="0,10,0,0" DockPanel.Dock="Top"/>
                                            <DockPanel VerticalAlignment="Top" DockPanel.Dock="Top" Height="30">
                                            	<Button Content="▼" ToolTip="{Binding m_Operate.call.target.KeyHeader}"  FontSize="14" DockPanel.Dock="Right" Margin="0" Width="30" Height="24"/>
                                            	<TextBlock TextWrapping="Wrap" Text="{Binding m_Operate.call.target.KeyName}" ToolTip="{Binding m_Operate.call.target.KeyHeader}" VerticalAlignment="Center" Height="24" Background="#FFEEEEEE"/>
                                            </DockPanel>
                                            <Separator Margin="0" Height="10" DockPanel.Dock="Top"/>
                                            <ComboBox Style="{DynamicResource SimpleComboBox}" VerticalAlignment="Top" Width="120" DockPanel.Dock="Top" SelectedIndex="0">
                                                <ComboBoxItem Content="个呼"/>
                                                <ComboBoxItem Content="组呼"/>
                                                <ComboBoxItem Content="全呼"/>
                                            </ComboBox>
                                            <CheckBox Content="PTT" Height="30" VerticalAlignment="Top" DockPanel.Dock="Bottom" Style="{DynamicResource CheckBoxStylePTT}"/>
                                            <Separator Margin="0" Height="10" DockPanel.Dock="Bottom"/>
                                        </DockPanel>
                                        <TextBlock HorizontalAlignment="Center" TextWrapping="Wrap" Text="---00:00:00--" VerticalAlignment="Bottom" Grid.Row="1"/>
                                    </Grid>
                                </TabItem>
                                <TabItem x:Name="messaged" Header="TabItem" Width="10" VerticalAlignment="Top" Margin="0,-2,0,0">
                                	<Grid>
                                		<Grid.RowDefinitions>
                                			<RowDefinition Height="100"/>
                                			<RowDefinition Height="29*"/>
                                		</Grid.RowDefinitions>
                                		<Grid.ColumnDefinitions>
                                			<ColumnDefinition Width="90"/>
                                			<ColumnDefinition Width="131*"/>
                                		</Grid.ColumnDefinitions>
                                		<gif:GifImage Source="/TrboX;component/themes/resource/dispatch.gif" Stretch="Uniform" Grid.Row="1" Margin="0,0,0,30"/>
                                		<DockPanel LastChildFill="False" Grid.Column="1" Grid.RowSpan="2">
                                			<TextBlock TextWrapping="Wrap" Text="短消息" VerticalAlignment="Top" FontSize="16" Margin="0,10,0,0" DockPanel.Dock="Top"/>
                                			<DockPanel VerticalAlignment="Top" DockPanel.Dock="Top" Height="30">
                                				<Button Content="▼" ToolTip="{Binding m_Operate.call.target.KeyHeader}"  FontSize="14" DockPanel.Dock="Right" Margin="0" Width="30" Height="24"/>
                                				<TextBlock TextWrapping="Wrap" Text="{Binding m_Operate.call.target.KeyName}" ToolTip="{Binding m_Operate.call.target.KeyHeader}" VerticalAlignment="Center" Height="24" Background="#FFEEEEEE"/>
                                			</DockPanel>
                                			<Separator Margin="0" Height="10" DockPanel.Dock="Top"/>
                                			<TextBox Height="148.883333333333" TextWrapping="Wrap" Text="Test Message" VerticalAlignment="Top" DockPanel.Dock="Top"/>
                                			<CheckBox Content="发送" Height="30" VerticalAlignment="Top" DockPanel.Dock="Bottom" Style="{DynamicResource CheckBoxStylePTT}"/>
                                			<Separator Margin="0" Height="10" DockPanel.Dock="Bottom"/>
                                		</DockPanel>
                                	</Grid>
                                </TabItem>
                            </TabControl>
                        </Border>
                    </Grid>
                </TabItem>
            </TabControl>
        </Border>
    </Grid>
</UserControl>
