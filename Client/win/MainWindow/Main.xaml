<local:MyWindow
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:src="clr-namespace:TrboX"
        xmlns:Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero" 
        xmlns:local="clr-namespace:TrboX"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:Forms="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms" x:Name="MainWindow" mc:Ignorable="d" 
        x:Class="TrboX.Main"   
        Icon="/TrboX;component/themes/resource/Logo.png" 
        Title="TrboX" Height="800" Width="1280" WindowStartupLocation="CenterScreen" Style="{DynamicResource MainWinStyle}" Closing="MainWindow_Closing" MinWidth="800" MinHeight="600" 
    >
    <!--<src:MyWindow.InputBindings>
        <KeyBinding Key="D" Modifiers="Control" Command="local:CustomCommands.DoStuff"/>
    </src:MyWindow.InputBindings>-->
    <local:MyWindow.Resources>

        <local:MsgWidthValueConverter x:Key="MsgWidth"/>
        <!--Simple Tree View - 这用来在 ScrollViewer 中对 TreeViewItems 进行布局 -->
        <local:IsNullValueConverter x:Key="IsObjNull" />
        <local:MainTabIndexFromRadio x:Key="IndexFromRadio" />
        <local:FalselHideConverter x:Key="FalseHide" />
        <local:ItemIconConverter x:Key="TypeToIcon" />
        <local:TypeToOP x:Key="TypeToOP" />
        <local:StatucToColorConverter x:Key="FastStatus" />

        <GridView x:Key="GridView">
            <GridViewColumn Header="Name" DisplayMemberBinding="{Binding name}"/>
            <GridViewColumn Header="Sex" DisplayMemberBinding="{Binding sex}"/>
            <GridViewColumn Header="Age" DisplayMemberBinding="{Binding age}"/>
        </GridView>

        <local:TileView x:Key="ImageView">
            <local:TileView.ItemTemplate>
                <DataTemplate>
                    <DockPanel Width="245" Height="336" >
                        <!--<DockPanel.ContextMenu >
                            <ContextMenu Visibility="Hidden"/>
                        </DockPanel.ContextMenu>-->
                        <local:FastPanel x:Name="dis"  PanelItem ="{Binding}" AllowDrop="True" TitlePressed="FastPanel_TiltePressed" Closing = "FastPanel_Closing"
                                         Dispatch="dis_Operate" 
                                         Message="dis_Operate" 
                                         Monitor="dis_Operate" 
                                         OnlineCheck="dis_Operate"  
                                         ShutDown="dis_Operate"  
                                         StartUp="dis_Operate"
                                         More="dis_More" />
                    </DockPanel>
                </DataTemplate>
            </local:TileView.ItemTemplate>
        </local:TileView>

        <local:TileView x:Key="IconView">
            <local:TileView.ItemTemplate>
                <DataTemplate>
                    <DockPanel Width="120" Height="150" >
                        <Border Background="#FF242424" BorderBrush="#FF0C0C0D">
                            <DockPanel >
                                <Grid HorizontalAlignment="Center" Height="72"  Width="72" DockPanel.Dock="Top" Margin="0,22,0,0">
                                    <Ellipse Margin="0" Stroke="Black" StrokeThickness="0">
                                        <Ellipse.Fill>
                                            <MultiBinding  Converter="{StaticResource FastStatus}" Mode="OneWay" >
                                                <Binding  Path="Type" />
                                                <Binding  Path="Contact" />
                                                <Binding  Path="Operate" />
                                            </MultiBinding>
                                        </Ellipse.Fill>
                                    </Ellipse>
                                    <Image x:Name="img"  HorizontalAlignment="Center" VerticalAlignment="Center" Stretch="None" >
                                        <Image.Source>
                                            <MultiBinding  Converter="{StaticResource TypeToIcon}" Mode="OneWay">
                                                <Binding  Path="Type" />
                                                <Binding  Path="Contact" />
                                                <Binding  Path="Operate" />
                                            </MultiBinding>
                                        </Image.Source>
                                        <Image.Opacity>
                                            <MultiBinding  Converter="{StaticResource TypeToOP}" Mode="OneWay">
                                                <Binding  Path="Type" />
                                                <Binding  Path="Contact" />
                                                <Binding  Path="Operate" />
                                            </MultiBinding>
                                        </Image.Opacity>
                                    </Image>
                                </Grid>




                                <!--<DockPanel.Background>
                                <MultiBinding  Converter="{StaticResource FastStatus}" Mode="OneWay" >
                                    <Binding  Path="Type" />
                                    <Binding  Path="Contact" />
                                    <Binding  Path="Operate" />
                                </MultiBinding>
                            </DockPanel.Background>
                            <Border BorderThickness="0" BorderBrush="#FF888888" ToolTip="{Binding NameInfo}" DockPanel.Dock="Top" HorizontalAlignment="Center" Width="60" Height="70" Background="{x:Null}">
                                <Image DockPanel.Dock="Top" Width="Auto" Height="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Bottom" Margin="0,25,0,5">
                                    <Image.Source>
                                        <MultiBinding  Converter="{StaticResource TypeToIcon}" Mode="OneWay" >
                                            <Binding  Path="Type" />
                                            <Binding  Path="Contact" />
                                            <Binding  Path="Operate" />
                                        </MultiBinding>
                                    </Image.Source>
                                </Image>
                                
                            </Border-->
                                <Grid DockPanel.Dock="Top" HorizontalAlignment="Center" Margin="8,0">
                                    <TextBlock Text="{Binding SimpleName}" HorizontalAlignment="Left" Foreground="#FFC9CDD2"  FontSize="14" VerticalAlignment="Center"/>
                                </Grid>
                            </DockPanel>
                        </Border>
                    </DockPanel>
                </DataTemplate>
            </local:TileView.ItemTemplate>
        </local:TileView>

        <local:MsgView x:Key="GroupView">
            <local:MsgView.ItemTemplate>
                <DataTemplate>
                    <Border x:Name="Msg" ToolTip="{Binding NameInfo}" Margin="0" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" Background="#00000000" Height="32">
                        <DockPanel >
                            <Image x:Name="Icon" Source="/TrboX;component/resource/images/group_18_18_on.png" Width="18" Height="18" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="34,0,0,0"/>
                            <DockPanel x:Name="dck_Content" Margin="5,0" >
                                <TextBlock Text="{Binding Name}"  TextWrapping="NoWrap" Margin="0" VerticalAlignment="Center" DockPanel.Dock="Left" Height="Auto" Foreground="#FFBEC3C7" FontSize="13" FontFamily="Hiragino Sans GB W3" />
                            </DockPanel>
                        </DockPanel>
                    </Border>
                </DataTemplate>

            </local:MsgView.ItemTemplate>
        </local:MsgView>

        <local:MsgView x:Key="EmployeeView">
            <local:MsgView.ItemTemplate>
                <DataTemplate>
                    <Border x:Name="Msg" Background="#00000000" ToolTip="{Binding NameInfo}" Margin="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Height="32" >
                        <DockPanel >
                            <Image x:Name="Icon" Source="/TrboX;component/resource/images/staff_18_18_off.png" Width="18" Height="18" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="34,0,0,0" Opacity="{Binding Converter={StaticResource IconOpFromOrg}}" />
                            <DockPanel x:Name="dck_Content" Margin="5,0" >
                                <TextBlock x:Name="txt" Text="{Binding Name}" ToolTip="{Binding target.HeaderWithoutKey}"  Foreground="#FFBEC3C7" FontSize="13" FontFamily="Hiragino Sans GB W3" TextWrapping="NoWrap" Margin="5,0,0,0" VerticalAlignment="Center" DockPanel.Dock="Left" Height="Auto" Opacity="{Binding Converter={StaticResource IconOpFromOrg}}" />
                            </DockPanel>
                        </DockPanel>
                    </Border>
                    <DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding Converter={StaticResource IconOpFromOrg}}" Value="1">
                            <Setter TargetName="Icon" Property="Source" Value="/TrboX;component/resource/images/staff_18_18_on.png" />
                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>

            </local:MsgView.ItemTemplate>
        </local:MsgView>

        <local:MsgView x:Key="VehicleView">
            <local:MsgView.ItemTemplate>
                <DataTemplate>
                    <Border x:Name="Msg"  Background="#00000000" ToolTip="{Binding NameInfo}" Margin="0"  VerticalAlignment="Stretch" Height="32">
                        <DockPanel >
                            <Image x:Name="Icon" Source="/TrboX;component/resource/images/vehicle_18_18_off.png" Width="18" Height="18" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="34,0,0,0" Opacity="{Binding Converter={StaticResource IconOpFromOrg}}" />
                            <DockPanel x:Name="dck_Content" Margin="5,0" >
                                <TextBlock Text="{Binding Name}" ToolTip="{Binding target.HeaderWithoutKey}"  TextWrapping="NoWrap" Margin="5,0,0,0"  Foreground="#FFBEC3C7" FontSize="13" FontFamily="Hiragino Sans GB W3" VerticalAlignment="Center" DockPanel.Dock="Left" Height="Auto"  Opacity="{Binding Converter={StaticResource IconOpFromOrg}}" />
                            </DockPanel>
                        </DockPanel>
                    </Border>
                    <DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding Converter={StaticResource IconOpFromOrg}}" Value="1">
                            <Setter TargetName="Icon" Property="Source" Value="/TrboX;component/resource/images/vehicle_18_18_on.png" />
                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </local:MsgView.ItemTemplate>
        </local:MsgView>

        <local:MsgView x:Key="RadioView">
            <local:MsgView.ItemTemplate>
                <DataTemplate>
                    <Border x:Name="Msg"  Background="#00000000" ToolTip="{Binding NameInfo}" Margin="0" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" Height="32">
                        <DockPanel >
                            <Image x:Name="Icon" Source="/TrboX;component/resource/images/radio_18_18_off.png" Width="18" Height="18" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="34,0,0,0" Opacity="{Binding Converter={StaticResource IconOpFromOrg}}" />
                            <DockPanel x:Name="dck_Content" Margin="5,0" >
                                <TextBlock Text="{Binding Radio.RadioID, StringFormat=ID：\{0:D\}}"  TextWrapping="NoWrap" Margin="5,0,0,0"  Foreground="#FFBEC3C7" FontSize="13" FontFamily="Hiragino Sans GB W3" VerticalAlignment="Center" DockPanel.Dock="Left" Height="Auto"  Opacity="{Binding Converter={StaticResource IconOpFromOrg}}"/>
                            </DockPanel>
                        </DockPanel>
                    </Border>
                    <DataTemplate.Triggers>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding Radio.Type}" Value="RADIO" />
                                <Condition Binding="{Binding Converter={StaticResource IconOpFromOrg}}" Value="1"  />
                            </MultiDataTrigger.Conditions>
                            <MultiDataTrigger.Setters>
                                <Setter TargetName="Icon" Property="Source" Value="/TrboX;component/resource/images/radio_18_18_on.png"/>
                            </MultiDataTrigger.Setters>
                        </MultiDataTrigger>

                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding Radio.Type}" Value="RIDE" />
                                <Condition Binding="{Binding Converter={StaticResource IconOpFromOrg}}" Value="1" />
                            </MultiDataTrigger.Conditions>
                            <MultiDataTrigger.Setters>
                                <Setter TargetName="Icon" Property="Source" Value="/TrboX;component/resource/images/ride_18_18_on.png"/>
                            </MultiDataTrigger.Setters>
                        </MultiDataTrigger>

                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding Radio.Type}" Value="RIDE" />
                                <Condition Binding="{Binding Converter={StaticResource IconOpFromOrg}}"  Value="0.5" />
                            </MultiDataTrigger.Conditions>
                            <MultiDataTrigger.Setters>
                                <Setter TargetName="Icon" Property="Source" Value="/TrboX;component/resource/images/ride_18_18_off.png"/>
                            </MultiDataTrigger.Setters>
                        </MultiDataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </local:MsgView.ItemTemplate>
        </local:MsgView>

        <local:MsgView x:Key="EventView">
            <local:MsgView.ItemTemplate>
                <DataTemplate>
                    <Border x:Name="Msg" Margin="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Height="40">
                        <DockPanel >
                            <Image x:Name="Icon" Source="/TrboX;component/resource/images/event_26_26.png" Width="25" Height="25" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="16,0,8,0"/>

                            <DockPanel x:Name="dck_Content" VerticalAlignment="Center" >
                                <TextBlock Text="{Binding Time, StringFormat=\{0:yyyy-MM-dd HH:mm:ss\}}" TextWrapping="NoWrap" Margin="0,0,0,3" Width="{Binding ActualWidth, Converter={StaticResource MsgWidth}, ElementName=lst_Event, Mode=OneWay}" Foreground="#FFCDCDCD" VerticalAlignment="Center" DockPanel.Dock="Top" Height="Auto" FontSize="10" FontFamily="Arial" HorizontalAlignment="Left" />
                                <TextBlock Text="{Binding Content}" TextWrapping="Wrap" Margin="0" Width="{Binding ActualWidth, Converter={StaticResource MsgWidth}, ElementName=lst_Event, Mode=OneWay}" Foreground="#FFCDCDCD" VerticalAlignment="Center" HorizontalAlignment="Left" DockPanel.Dock="Top" />
                            </DockPanel>
                        </DockPanel>
                    </Border>
                </DataTemplate>

            </local:MsgView.ItemTemplate>
        </local:MsgView>

        <local:MsgView x:Key="AlarmView">
            <local:MsgView.ItemTemplate>
                <DataTemplate>
                    <Border x:Name="Msg" Margin="0" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" MinHeight="40" >
                        <DockPanel >
                            <Image x:Name="Icon" Source="/TrboX;component/resource/images/alarm_18_18.png" Width="18" Height="18" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="16,11,8,0"/>
                            <local:IconBtn x:Name="btn_AlarmNotify_Close" HorizontalAlignment="Right" VerticalAlignment="Top" DockPanel.Dock="Right" Height="18" Width="18" Margin="0,11,5,0" Click="btn_Notify_Close_Click" Normal="/TrboX;component/resource/images/msg_close_18_18_n.png"/>
                            <local:IconBtn x:Name="btn_AlarmNotify_Explaner"  HorizontalAlignment="Right" VerticalAlignment="Top" DockPanel.Dock="Right" Height="18" Width="18" Margin="5,11,0,0" Click="btn_Notify_Explaner_Click" Normal="/TrboX;component/resource/images/msg_ex_18_18_n.png" />

                            <DockPanel x:Name="dck_Content" Margin="0,7.5,0,7.5" Width="{Binding ActualWidth, Converter={StaticResource MsgWidth}, ElementName=lst_Alarm, Mode=OneWay}" DockPanel.Dock="Left" HorizontalAlignment="Left" VerticalAlignment="Top" >
                                <TextBlock  TextWrapping="NoWrap" Margin="0,0,0,3"  Foreground="#FFcdcdcd" VerticalAlignment="Center" DockPanel.Dock="Top" Height="Auto" FontSize="10" FontFamily="Arial" HorizontalAlignment="Left">
                                    <TextBlock.Text>
                                        <MultiBinding   StringFormat="{}{0:yyyy-MM-dd HH:mm:ss}({1})" >
                                            <Binding  Path="Time" />
                                            <Binding  Path="Source.Name" />
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                                <TextBlock Text="{Binding Content.Content}"  Foreground="#FFcdcdcd" TextWrapping="Wrap" Margin="0" Width="{Binding ActualWidth, Converter={StaticResource MsgWidth}, ElementName=lst_Alarm, Mode=OneWay}"  VerticalAlignment="Center" DockPanel.Dock="Top" />
                            </DockPanel>
                        </DockPanel>
                    </Border>
                </DataTemplate>

            </local:MsgView.ItemTemplate>
        </local:MsgView>

        <local:MsgView x:Key="MsgView">
            <local:MsgView.ItemTemplate>
                <DataTemplate>

                    <Border x:Name="Msg" Margin="0" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" MinHeight="40" >
                        <DockPanel >
                            <Image x:Name="Icon" Source="/TrboX;component/resource/images/message_18_18.png" Width="18" Height="18" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="16,11,8,0"/>
                            <local:IconBtn x:Name="btn_AlarmNotify_Close" HorizontalAlignment="Right" VerticalAlignment="Top" DockPanel.Dock="Right" Height="18" Width="18" Margin="0,11,5,0" Click="btn_Notify_Close_Click" Normal="/TrboX;component/resource/images/msg_close_18_18_n.png"/>
                            <local:IconBtn x:Name="btn_AlarmNotify_Explaner"  HorizontalAlignment="Right" VerticalAlignment="Top" DockPanel.Dock="Right" Height="18" Width="18" Margin="5,11,0,0" Click="btn_Notify_Explaner_Click" Normal="/TrboX;component/resource/images/msg_ex_18_18_n.png" />

                            <DockPanel x:Name="dck_Content" Margin="0,7.5,0,7.5" Width="{Binding ActualWidth, Converter={StaticResource MsgWidth}, ElementName=lst_Alarm, Mode=OneWay}" DockPanel.Dock="Left" HorizontalAlignment="Left" VerticalAlignment="Top" >
                                <TextBlock  TextWrapping="NoWrap" Margin="0,0,0,3"  Foreground="#FFcdcdcd" VerticalAlignment="Center" DockPanel.Dock="Top" Height="Auto" FontSize="10" FontFamily="Arial" HorizontalAlignment="Left">
                                    <TextBlock.Text>
                                        <MultiBinding   StringFormat="{}{0:yyyy-MM-dd HH:mm:ss}({1})" >
                                            <Binding  Path="Time" />
                                            <Binding  Path="Source.Name" />
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                                <TextBlock Text="{Binding Content.Content}"  Foreground="#FFcdcdcd" TextWrapping="Wrap" Margin="0" Width="{Binding ActualWidth, Converter={StaticResource MsgWidth}, ElementName=lst_Alarm, Mode=OneWay}"  VerticalAlignment="Center" DockPanel.Dock="Top" />
                            </DockPanel>
                        </DockPanel>
                    </Border>
                </DataTemplate>

            </local:MsgView.ItemTemplate>
        </local:MsgView>

        <local:MsgView x:Key="RxView">
            <local:MsgView.ItemTemplate>
                <DataTemplate>
                    <Border x:Name="Msg" Margin="0" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" MinHeight="40" >
                        <DockPanel >
                            <Image x:Name="Icon" Source="/TrboX;component/resource/images/call_18_18.png" Width="18" Height="18" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="16,11,8,0"/>
                            <local:IconBtn x:Name="btn_AlarmNotify_Close" HorizontalAlignment="Right" VerticalAlignment="Top" DockPanel.Dock="Right" Height="18" Width="18" Margin="0,11,5,0" Click="btn_Notify_Close_Click" Normal="/TrboX;component/resource/images/msg_close_18_18_n.png"/>
                            <local:IconBtn x:Name="btn_AlarmNotify_Explaner"  HorizontalAlignment="Right" VerticalAlignment="Top" DockPanel.Dock="Right" Height="18" Width="18" Margin="5,11,0,0" Click="btn_Notify_Explaner_Click" Normal="/TrboX;component/resource/images/msg_ex_18_18_n.png" />

                            <DockPanel x:Name="dck_Content" Margin="0,7.5,0,7.5" Width="{Binding ActualWidth, Converter={StaticResource MsgWidth}, ElementName=lst_Alarm, Mode=OneWay}" DockPanel.Dock="Left" HorizontalAlignment="Left" VerticalAlignment="Top" >
                                <TextBlock  TextWrapping="NoWrap" Margin="0,0,0,3"  Foreground="#FFcdcdcd" VerticalAlignment="Center" DockPanel.Dock="Top" Height="Auto" FontSize="10" FontFamily="Arial" HorizontalAlignment="Left">
                                    <TextBlock.Text>
                                        <MultiBinding   StringFormat="{}{0:yyyy-MM-dd HH:mm:ss}" >
                                            <Binding  Path="Time" />
                                            <!--<Binding  Path="Source.Name" />-->
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                                <TextBlock Text="{Binding Source.Name, StringFormat=来自({0})的呼叫}"  Foreground="#FFcdcdcd" TextWrapping="Wrap" Margin="0" Width="{Binding ActualWidth, Converter={StaticResource MsgWidth}, ElementName=lst_Alarm, Mode=OneWay}"  VerticalAlignment="Center" DockPanel.Dock="Top" />
                            </DockPanel>
                        </DockPanel>
                    </Border>

                </DataTemplate>

            </local:MsgView.ItemTemplate>
        </local:MsgView>

        <local:MsgView x:Key="JobView">
            <local:MsgView.ItemTemplate>
                <DataTemplate>
                    <Border x:Name="Msg" Margin="0" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" MinHeight="40" >
                        <DockPanel >
                            <Image x:Name="Icon" Source="/TrboX;component/resource/images/job_tickets_18_18.png" Width="18" Height="18" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="16,11,8,0"/>
                            <local:IconBtn x:Name="btn_AlarmNotify_Close" HorizontalAlignment="Right" VerticalAlignment="Top" DockPanel.Dock="Right" Height="18" Width="18" Margin="0,11,5,0" Click="btn_Notify_Close_Click" Normal="/TrboX;component/resource/images/msg_close_18_18_n.png"/>
                            <local:IconBtn x:Name="btn_AlarmNotify_Explaner"  HorizontalAlignment="Right" VerticalAlignment="Top" DockPanel.Dock="Right" Height="18" Width="18" Margin="5,11,0,0" Click="btn_Notify_Explaner_Click" Normal="/TrboX;component/resource/images/msg_ex_18_18_n.png" />

                            <DockPanel x:Name="dck_Content" Margin="0,7.5,0,7.5" Width="{Binding ActualWidth, Converter={StaticResource MsgWidth}, ElementName=lst_Alarm, Mode=OneWay}" DockPanel.Dock="Left" HorizontalAlignment="Left" VerticalAlignment="Top" >
                                <TextBlock  TextWrapping="NoWrap" Margin="0,0,0,3"  Foreground="#FFcdcdcd" VerticalAlignment="Center" DockPanel.Dock="Top" Height="Auto" FontSize="10" FontFamily="Arial" HorizontalAlignment="Left">
                                    <TextBlock.Text>
                                        <MultiBinding   StringFormat="{}{0:yyyy-MM-dd HH:mm:ss}({1})" >
                                            <Binding  Path="Time" />
                                            <Binding  Path="Source.Name" />
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                                <TextBlock Text="{Binding Content}"  Foreground="#FFcdcdcd" TextWrapping="Wrap" Margin="0" Width="{Binding ActualWidth, Converter={StaticResource MsgWidth}, ElementName=lst_Alarm, Mode=OneWay}"  VerticalAlignment="Center" DockPanel.Dock="Top" />
                            </DockPanel>
                        </DockPanel>
                    </Border>
                </DataTemplate>

            </local:MsgView.ItemTemplate>
        </local:MsgView>

        <local:MsgView x:Key="TrackerView">
            <local:MsgView.ItemTemplate>
                <DataTemplate>
                    <Border x:Name="Msg" Margin="0" HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" MinHeight="40" >
                        <DockPanel >
                            <Image x:Name="Icon" Source="/TrboX;component/resource/images/tacker_18_18.png" Width="18" Height="18" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="16,11,8,0"/>
                            <local:IconBtn x:Name="btn_AlarmNotify_Close" HorizontalAlignment="Right" VerticalAlignment="Top" DockPanel.Dock="Right" Height="18" Width="18" Margin="0,11,5,0" Click="btn_Notify_Close_Click" Normal="/TrboX;component/resource/images/msg_close_18_18_n.png"/>
                            <local:IconBtn x:Name="btn_AlarmNotify_Explaner"  HorizontalAlignment="Right" VerticalAlignment="Top" DockPanel.Dock="Right" Height="18" Width="18" Margin="5,11,0,0" Click="btn_Notify_Explaner_Click" Normal="/TrboX;component/resource/images/msg_ex_18_18_n.png" />

                            <DockPanel x:Name="dck_Content" Margin="0,7.5,0,7.5" Width="{Binding ActualWidth, Converter={StaticResource MsgWidth}, ElementName=lst_Alarm, Mode=OneWay}" DockPanel.Dock="Left" HorizontalAlignment="Left" VerticalAlignment="Top" >
                                <TextBlock  TextWrapping="NoWrap" Margin="0,0,0,3"  Foreground="#FFcdcdcd" VerticalAlignment="Center" DockPanel.Dock="Top" Height="Auto" FontSize="10" FontFamily="Arial" HorizontalAlignment="Left">
                                    <TextBlock.Text>
                                        <MultiBinding   StringFormat="{}{0:yyyy-MM-dd HH:mm:ss}({1})" >
                                            <Binding  Path="Time" />
                                            <Binding  Path="Source.Name" />
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                                <TextBlock Text="{Binding Content}"  Foreground="#FFcdcdcd" TextWrapping="Wrap" Margin="0" Width="{Binding ActualWidth, Converter={StaticResource MsgWidth}, ElementName=lst_Alarm, Mode=OneWay}"  VerticalAlignment="Center" DockPanel.Dock="Top" />
                            </DockPanel>
                        </DockPanel>
                    </Border>
                </DataTemplate>

            </local:MsgView.ItemTemplate>
        </local:MsgView>
        <Style x:Key="CheckBox-View-Style" TargetType="{x:Type CheckBox}">
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
            <Setter Property="Background" Value="{StaticResource CheckBoxFillNormal}"/>
            <Setter Property="BorderBrush" Value="{StaticResource CheckBoxStroke}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FocusVisualStyle" Value="{StaticResource EmptyCheckBoxFocusVisual}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type CheckBox}">
                        <BulletDecorator Background="Transparent" SnapsToDevicePixels="true">
                            <BulletDecorator.Bullet>
                                <Border x:Name="border" BorderBrush="Black" BorderThickness="0" Height="18" Width="18">
                                    <Border.Background>
                                        <ImageBrush ImageSource="/TrboX;component/resource/images/icon_view_14_14_n.png"/>
                                    </Border.Background>
                                    <Themes:BulletChrome BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" IsChecked="{TemplateBinding IsChecked}" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderPressed="{TemplateBinding IsPressed}" d:IsHidden="True" Margin="0,0,18,18"/>
                                </Border>
                            </BulletDecorator.Bullet>
                        </BulletDecorator>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter Property="Background" TargetName="border">
                                    <Setter.Value>
                                        <ImageBrush ImageSource="/TrboX;component/resource/images/panel_view_14_14_n.png"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="False"/>
                                    <Condition Property="IsMouseOver" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Background" TargetName="border">
                                    <Setter.Value>
                                        <ImageBrush ImageSource="/TrboX;component/resource/images/icon_view_14_14_h.png"/>
                                    </Setter.Value>
                                </Setter>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="True"/>
                                    <Condition Property="IsMouseOver" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Background" TargetName="border">
                                    <Setter.Value>
                                        <ImageBrush ImageSource="/TrboX;component/resource/images/panel_view_14_14_h.png.png"/>
                                    </Setter.Value>
                                </Setter>
                            </MultiTrigger>
                            <Trigger Property="HasContent" Value="true">
                                <Setter Property="FocusVisualStyle" Value="{StaticResource CheckRadioFocusVisual}"/>
                                <Setter Property="Padding" Value="4,0,0,0"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="CheckBoxStyleMaxStatus" TargetType="{x:Type CheckBox}">
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
            <Setter Property="Background" Value="{StaticResource CheckBoxFillNormal}"/>
            <Setter Property="BorderBrush" Value="{StaticResource CheckBoxStroke}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FocusVisualStyle" Value="{StaticResource EmptyCheckBoxFocusVisual}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type CheckBox}">
                        <BulletDecorator Background="Transparent" SnapsToDevicePixels="true">
                            <BulletDecorator.Bullet>
                                <Border x:Name="border" BorderBrush="Black" BorderThickness="0" Height="18" Width="18">
                                    <Border.Background>
                                        <ImageBrush ImageSource="/TrboX;component/resource/images/full_screen_14_14_n.png"/>
                                    </Border.Background>
                                    <Themes:BulletChrome BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" IsChecked="{TemplateBinding IsChecked}" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderPressed="{TemplateBinding IsPressed}" d:IsHidden="True" Margin="0,0,18,18"/>
                                </Border>
                            </BulletDecorator.Bullet>
                        </BulletDecorator>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="False"/>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter Property="Background" TargetName="border">
                                    <Setter.Value>
                                        <ImageBrush ImageSource="/TrboX;component/resource/images/normall_screen_14_14_n.png"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="False"/>
                                    <Condition Property="IsMouseOver" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Background" TargetName="border">
                                    <Setter.Value>
                                        <ImageBrush ImageSource="/TrboX;component/resource/images/full_screen_14_14_h.png"/>
                                    </Setter.Value>
                                </Setter>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="True"/>
                                    <Condition Property="IsMouseOver" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Background" TargetName="border">
                                    <Setter.Value>
                                        <ImageBrush ImageSource="/TrboX;component/resource/images/normall_screen_14_14_h.png"/>
                                    </Setter.Value>
                                </Setter>
                            </MultiTrigger>
                            <Trigger Property="HasContent" Value="true">
                                <Setter Property="FocusVisualStyle" Value="{StaticResource CheckRadioFocusVisual}"/>
                                <Setter Property="Padding" Value="4,0,0,0"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="MenuItemStyleTilte" TargetType="{x:Type MenuItem}">
            <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.MenuTextBrushKey}}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type MenuItem}">
                        <Border x:Name="Border" BorderThickness="{TemplateBinding BorderThickness}" Padding="1" Background="{x:Null}" CornerRadius="4" BorderBrush="{x:Null}">
                            <Grid x:Name="grid">

                                <!-- Grid 用于结合 Icon、Content、Glyph 复选标记和 Arrow 的列，以显示下一个级别
							 Grid 中采用大小共享方式，以便将每个 MenuItem 的 Icon、Content 和 Arrow 一起对齐 -->
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition MinWidth="4" Width="Auto" SharedSizeGroup="MenuItemIconColumnGroup"/>
                                    <ColumnDefinition/>
                                    <ColumnDefinition Width="Auto" SharedSizeGroup="MenuItemIGTColumnGroup"/>
                                    <ColumnDefinition Width="4"/>
                                </Grid.ColumnDefinitions>

                                <!-- ContentPresenter 用来显示 Icon (如果需要) -->

                                <!-- ContentPresenter 用来显示 Icon (如果需要) -->
                                <ContentPresenter Margin="4,12,6,12" x:Name="Icon" VerticalAlignment="Center" ContentSource="Icon" Visibility="Collapsed" Height="0"/>

                                <!-- Glyph 是一个复选标记(如果可选中的菜单需要) -->
                                <Grid Visibility="Collapsed" Margin="4,8.3,6,8.3" x:Name="GlyphPanel" VerticalAlignment="Center" Height="7.4">
                                    <Path x:Name="GlyphPanelpath" VerticalAlignment="Center" Fill="{TemplateBinding Foreground}" Data="M0,2 L0,4.8 L2.5,7.4 L7.1,2.8 L7.1,0 L2.5,4.6 z" FlowDirection="LeftToRight"/>
                                </Grid>

                                <!-- 菜单文本等内容 -->
                                <ContentPresenter Grid.Column="1" x:Name="HeaderHost" RecognizesAccessKey="True" ContentSource="Header" Margin="10,1.5" VerticalAlignment="Center" Height="21"/>

                                <!-- 箭头绘制的路径，该路径指向菜单的下一个级别 -->
                                <Grid Grid.Column="3" Margin="4,8,1,8" x:Name="ArrowPanel" VerticalAlignment="Center" Height="8">
                                    <Path x:Name="ArrowPanelPath" VerticalAlignment="Center" Fill="{TemplateBinding Foreground}" Data="M0,0 L0,8 L4,4 z"/>
                                </Grid>

                                <!-- Popup 是向下展开或横向展开(具体取决于该项所处的级别)的菜单的主体 -->
                                <Popup IsOpen="{Binding IsSubmenuOpen, RelativeSource={RelativeSource TemplatedParent}}" Placement="Bottom" x:Name="SubMenuPopup" Focusable="false" AllowsTransparency="true" PopupAnimation="{DynamicResource {x:Static SystemParameters.MenuPopupAnimationKey}}" VerticalOffset="9" HorizontalOffset="-2">
                                    <Grid x:Name="SubMenu" Background="{x:Null}" Margin="0">
                                        <Border x:Name="SubMenuBorder" Background="#FF4C4C4F" BorderBrush="#FF262626" BorderThickness="1" Margin="0,0,5,5" FlowDirection="RightToLeft">
                                            <Border.Effect>
                                                <DropShadowEffect Color="#FF262626" Direction="225" BlurRadius="5" ShadowDepth="3" Opacity="0.5" />
                                            </Border.Effect>
                                        </Border>

                                        <!-- StackPanel 保留菜单的子级。这是通过 IsItemsHost=True 来设置的 -->
                                        <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Cycle" Margin="0,8,5,13"/>
                                    </Grid>
                                </Popup>

                            </Grid>
                        </Border>

                        <!-- 这些触发器通过 Role 重新配置 MenuItem 的四种排列方式以显示不同级别的菜单 -->
                        <ControlTemplate.Triggers>

                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsSuspendingPopupAnimation" Value="False"/>
                                    <Condition Property="IsHighlighted" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Background" TargetName="Border" Value="#FF454547"/>
                                <Setter Property="BorderBrush" TargetName="Border" Value="#FF222324"/>
                                <Setter Property="BitmapEffect" TargetName="Border">
                                    <Setter.Value>
                                        <DropShadowBitmapEffect Color="#FFBDBDBD" Direction="270" Softness="0" ShadowDepth="1" Opacity="0.3"/>
                                    </Setter.Value>
                                </Setter>
                            </MultiTrigger>

                            <!-- 如果不存在 Icon，我们会折叠 Icon Content -->
                            <!-- 对 Menu Highlight 和 IsEnabled 使用系统颜色-->
                            <!-- Role = TopLevelHeader: 这是菜单中的根菜单项；Popup 向下展开 -->
                            <Trigger Property="Role" Value="TopLevelHeader">
                                <Setter Property="Margin" Value="0,1,0,1"/>
                                <Setter Property="Padding" Value="6,3,6,3"/>
                                <Setter Property="Grid.IsSharedSizeScope" Value="true"/>
                                <Setter Property="Placement" Value="Bottom" TargetName="SubMenuPopup"/>
                                <Setter Property="Visibility" Value="Collapsed" TargetName="ArrowPanel"/>
                                <Setter Property="Margin" TargetName="SubMenu" Value="0,12,0,0"/>
                            </Trigger>

                            <!-- Role = TopLevelItem:  这是没有任何子项的顶级菜单的子菜单项-->
                            <Trigger Property="Role" Value="TopLevelItem">
                                <Setter Property="Margin" Value="0,1,0,1"/>
                                <Setter Property="Padding" Value="6,3,6,3"/>
                                <Setter Property="Visibility" Value="Collapsed" TargetName="ArrowPanel"/>
                                <Setter Property="HorizontalOffset" TargetName="SubMenuPopup" Value="-2"/>
                                <Setter Property="VerticalOffset" TargetName="SubMenuPopup" Value="9"/>
                            </Trigger>

                            <!-- Role = SubMenuHeader: 这是不包含子级的子菜单项 -->
                            <Trigger Property="Role" Value="SubmenuHeader">
                                <Setter Property="DockPanel.Dock" Value="Top"/>
                                <Setter Property="Padding" Value="0,2,0,2"/>
                                <Setter Property="Grid.IsSharedSizeScope" Value="true"/>
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsSuspendingPopupAnimation" Value="True"/>
                                    <Condition Property="IsHighlighted" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="PopupAnimation" Value="None" TargetName="SubMenuPopup"/>
                                <Setter Property="Background" TargetName="Border" Value="#FF29292B"/>
                                <Setter Property="BorderBrush" TargetName="Border" Value="#FF222324"/>
                                <Setter Property="BitmapEffect" TargetName="Border">
                                    <Setter.Value>
                                        <DropShadowBitmapEffect Color="#FFBDBDBD" Direction="270" Softness="0" ShadowDepth="1" Opacity="0.3"/>
                                    </Setter.Value>
                                </Setter>

                            </MultiTrigger>

                            <!-- GlyphPanel 包含 CheckMark -->
                            <Trigger Property="IsChecked" Value="true">
                                <Setter Property="Visibility" Value="Visible" TargetName="GlyphPanel"/>
                                <Setter Property="Visibility" Value="Collapsed" TargetName="Icon"/>
                            </Trigger>

                            <!--
							<Trigger Property="IsMouseOver" Value="True">
								<Setter Property="Background" TargetName="Border" Value="Black"/>
								<Setter Property="BorderBrush" TargetName="Border" Value="{x:Null}"/>
								<Setter Property="Background" TargetName="grid" Value="{x:Null}"/>
								<Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
							</Trigger>
							-->
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <LinearGradientBrush x:Key="MenuItemSelectionFill" EndPoint="0,1" StartPoint="0,0">
            <GradientStop Color="#34C5EBFF" Offset="0"/>
            <GradientStop Color="#3481D8FF" Offset="1"/>
        </LinearGradientBrush>
        <Geometry x:Key="Checkmark">M 0,5.1 L 1.7,5.2 L 3.4,7.1 L 8,0.4 L 9.2,0 L 3.3,10.8 Z</Geometry>
        <ControlTemplate x:Key="{ComponentResourceKey ResourceId=SubmenuItemTemplateKey, TypeInTargetAssembly={x:Type MenuItem}}" TargetType="{x:Type MenuItem}">
            <Grid x:Name="grid" SnapsToDevicePixels="true" Background="#00000000">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition MinWidth="24" SharedSizeGroup="MenuItemIconColumnGroup" Width="Auto"/>
                        <ColumnDefinition Width="4"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="37"/>
                        <ColumnDefinition SharedSizeGroup="MenuItemIGTColumnGroup" Width="Auto"/>
                        <ColumnDefinition Width="17"/>
                    </Grid.ColumnDefinitions>
                    <ContentPresenter x:Name="Icon" ContentSource="Icon" Margin="1" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="Center"/>
                    <Border x:Name="GlyphPanel" BorderBrush="#CDD3E6" BorderThickness="1" Background="#E6EFF4" CornerRadius="3" Height="22" Margin="1" Visibility="Hidden" Width="22" VerticalAlignment="Center">
                        <Image x:Name="image"/>
                    </Border>
                    <ContentPresenter Grid.Column="2" ContentSource="Header" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="4" Margin="{TemplateBinding Padding}" Text="{TemplateBinding InputGestureText}" VerticalAlignment="Center" FontSize="13"/>
                </Grid>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" TargetName="grid" Value="#FF5695DB"/>
                </Trigger>
                <Trigger Property="Icon" Value="{x:Null}">
                    <Setter Property="Visibility" TargetName="Icon" Value="Collapsed"/>
                </Trigger>
                <Trigger Property="IsChecked" Value="true">
                    <Setter Property="Visibility" TargetName="GlyphPanel" Value="Visible"/>
                    <Setter Property="Visibility" TargetName="Icon" Value="Collapsed"/>
                    <Setter Property="Background" TargetName="GlyphPanel" Value="{x:Null}"/>
                    <Setter Property="BorderBrush" TargetName="GlyphPanel" Value="{x:Null}"/>
                    <Setter Property="Height" TargetName="image" Value="16"/>
                    <Setter Property="Width" TargetName="image" Value="16"/>
                    <Setter Property="Source" TargetName="image" Value="/TrboX;component/resource/images/menu_chk_16_16_n.png"/>
                </Trigger>
                <Trigger Property="IsHighlighted" Value="true"/>
                <MultiTrigger>
                    <MultiTrigger.Conditions>
                        <Condition Property="IsEnabled" Value="False"/>
                        <Condition Property="IsChecked" Value="True"/>
                    </MultiTrigger.Conditions>
                    <Setter Property="Foreground" Value="#FF9A9A9A"/>
                    <Setter Property="Visibility" TargetName="GlyphPanel" Value="Visible"/>
                    <Setter Property="Background" TargetName="GlyphPanel" Value="{x:Null}"/>
                    <Setter Property="BorderBrush" TargetName="GlyphPanel" Value="{x:Null}"/>
                    <Setter Property="Source" TargetName="image" Value="/TrboX;component/resource/images/menu_chk_16_16_d .png"/>
                </MultiTrigger>
                <MultiTrigger>
                    <MultiTrigger.Conditions>
                        <Condition Property="IsEnabled" Value="False"/>
                        <Condition Property="IsChecked" Value="False"/>
                    </MultiTrigger.Conditions>
                    <Setter Property="Foreground" Value="#FF9A9A9A"/>
                    <Setter Property="Visibility" TargetName="GlyphPanel" Value="Hidden"/>
                    <Setter Property="Background" TargetName="GlyphPanel" Value="{x:Null}"/>
                    <Setter Property="BorderBrush" TargetName="GlyphPanel" Value="{x:Null}"/>
                </MultiTrigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <LinearGradientBrush x:Key="MenuItemPressedFill" EndPoint="0,1" StartPoint="0,0">
            <GradientStop Color="#28717070" Offset="0"/>
            <GradientStop Color="#50717070" Offset="0.75"/>
            <GradientStop Color="#90717070" Offset="1"/>
        </LinearGradientBrush>
        <SolidColorBrush x:Key="SubMenuBackgroundBrush" Color="#FFF5F5F5"/>
        <Geometry x:Key="UpArrow">M 0,4 L 3.5,0 L 7,4 Z</Geometry>
        <Style x:Key="MenuScrollButton" BasedOn="{x:Null}" TargetType="{x:Type RepeatButton}">
            <Setter Property="ClickMode" Value="Hover"/>
            <Setter Property="MinWidth" Value="0"/>
            <Setter Property="MinHeight" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type RepeatButton}">
                        <DockPanel Background="Transparent" SnapsToDevicePixels="true">
                            <Rectangle x:Name="R1" DockPanel.Dock="Right" Fill="Transparent" Width="1"/>
                            <Rectangle x:Name="B1" DockPanel.Dock="Bottom" Fill="Transparent" Height="1"/>
                            <Rectangle x:Name="L1" DockPanel.Dock="Left" Fill="Transparent" Width="1"/>
                            <Rectangle x:Name="T1" DockPanel.Dock="Top" Fill="Transparent" Height="1"/>
                            <ContentPresenter x:Name="ContentContainer" HorizontalAlignment="Center" Margin="2,2,2,2" VerticalAlignment="Center"/>
                        </DockPanel>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsPressed" Value="true">
                                <Setter Property="Fill" TargetName="R1" Value="{DynamicResource {x:Static SystemColors.ControlLightLightBrushKey}}"/>
                                <Setter Property="Fill" TargetName="B1" Value="{DynamicResource {x:Static SystemColors.ControlLightLightBrushKey}}"/>
                                <Setter Property="Fill" TargetName="L1" Value="{DynamicResource {x:Static SystemColors.ControlDarkDarkBrushKey}}"/>
                                <Setter Property="Fill" TargetName="T1" Value="{DynamicResource {x:Static SystemColors.ControlDarkDarkBrushKey}}"/>
                                <Setter Property="Margin" TargetName="ContentContainer" Value="3,3,1,1"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <MenuScrollingVisibilityConverter x:Key="MenuScrollingVisibilityConverter"/>
        <Geometry x:Key="DownArrow">M 0,0 L 3.5,4 L 7,0 Z</Geometry>
        <Style x:Key="{ComponentResourceKey ResourceId=MenuScrollViewer, TypeInTargetAssembly={x:Type FrameworkElement}}" BasedOn="{x:Null}" TargetType="{x:Type ScrollViewer}">
            <Setter Property="HorizontalScrollBarVisibility" Value="Hidden"/>
            <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ScrollViewer}">
                        <Grid SnapsToDevicePixels="true">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Border Grid.Column="0" Grid.Row="1">
                                <ScrollContentPresenter CanContentScroll="{TemplateBinding CanContentScroll}" Margin="{TemplateBinding Padding}"/>
                            </Border>
                            <RepeatButton Grid.Column="0" CommandTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}" Command="{x:Static ScrollBar.LineUpCommand}" Focusable="false" Grid.Row="0" Style="{StaticResource MenuScrollButton}">
                                <RepeatButton.Visibility>
                                    <MultiBinding ConverterParameter="0" Converter="{StaticResource MenuScrollingVisibilityConverter}" FallbackValue="Visibility.Collapsed">
                                        <Binding Path="ComputedVerticalScrollBarVisibility" RelativeSource="{RelativeSource TemplatedParent}"/>
                                        <Binding Path="VerticalOffset" RelativeSource="{RelativeSource TemplatedParent}"/>
                                        <Binding Path="ExtentHeight" RelativeSource="{RelativeSource TemplatedParent}"/>
                                        <Binding Path="ViewportHeight" RelativeSource="{RelativeSource TemplatedParent}"/>
                                    </MultiBinding>
                                </RepeatButton.Visibility>
                                <Path Data="{StaticResource UpArrow}" Fill="{DynamicResource {x:Static SystemColors.MenuTextBrushKey}}"/>
                            </RepeatButton>
                            <RepeatButton Grid.Column="0" CommandTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}" Command="{x:Static ScrollBar.LineDownCommand}" Focusable="false" Grid.Row="2" Style="{StaticResource MenuScrollButton}">
                                <RepeatButton.Visibility>
                                    <MultiBinding ConverterParameter="100" Converter="{StaticResource MenuScrollingVisibilityConverter}" FallbackValue="Visibility.Collapsed">
                                        <Binding Path="ComputedVerticalScrollBarVisibility" RelativeSource="{RelativeSource TemplatedParent}"/>
                                        <Binding Path="VerticalOffset" RelativeSource="{RelativeSource TemplatedParent}"/>
                                        <Binding Path="ExtentHeight" RelativeSource="{RelativeSource TemplatedParent}"/>
                                        <Binding Path="ViewportHeight" RelativeSource="{RelativeSource TemplatedParent}"/>
                                    </MultiBinding>
                                </RepeatButton.Visibility>
                                <Path Data="{StaticResource DownArrow}" Fill="{DynamicResource {x:Static SystemColors.MenuTextBrushKey}}"/>
                            </RepeatButton>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <ControlTemplate x:Key="{ComponentResourceKey ResourceId=TopLevelHeaderTemplateKey, TypeInTargetAssembly={x:Type MenuItem}}" TargetType="{x:Type MenuItem}">
            <Grid SnapsToDevicePixels="true">
                <Rectangle x:Name="OuterBorder" RadiusY="2" RadiusX="2"/>
                <Rectangle x:Name="Bg" Fill="{TemplateBinding Background}" Margin="1" RadiusY="1" RadiusX="1" Stroke="{TemplateBinding BorderBrush}" StrokeThickness="1"/>
                <Rectangle x:Name="InnerBorder" Margin="2"/>
                <DockPanel>
                    <ContentPresenter x:Name="Icon" ContentSource="Icon" Margin="4,0,6,0" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="Center"/>
                    <Path x:Name="GlyphPanel" Data="{StaticResource Checkmark}" Fill="{TemplateBinding Foreground}" FlowDirection="LeftToRight" Margin="7,0,0,0" Visibility="Collapsed" VerticalAlignment="Center"/>
                    <ContentPresenter ContentSource="Header" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                </DockPanel>
                <Popup x:Name="PART_Popup" AllowsTransparency="true" Focusable="false" HorizontalOffset="1" IsOpen="{Binding IsSubmenuOpen, RelativeSource={RelativeSource TemplatedParent}}" PopupAnimation="{DynamicResource {x:Static SystemParameters.MenuPopupAnimationKey}}" Placement="Bottom" VerticalOffset="-1">
                    <Themes:SystemDropShadowChrome x:Name="Shdw" Color="Transparent">
                        <Border x:Name="SubMenuBorder" BorderBrush="#FF959595" BorderThickness="1" Background="{StaticResource SubMenuBackgroundBrush}">
                            <ScrollViewer x:Name="SubMenuScrollViewer" Margin="1,0" Style="{DynamicResource {ComponentResourceKey ResourceId=MenuScrollViewer, TypeInTargetAssembly={x:Type FrameworkElement}}}">
                                <Grid RenderOptions.ClearTypeHint="Enabled">
                                    <Canvas HorizontalAlignment="Left" Height="0" VerticalAlignment="Top" Width="0">
                                        <Rectangle x:Name="OpaqueRect" Fill="{StaticResource SubMenuBackgroundBrush}" Height="{Binding ActualHeight, ElementName=SubMenuBorder}" Width="{Binding ActualWidth, ElementName=SubMenuBorder}"/>
                                    </Canvas>
                                    <Rectangle Fill="#F1F1F1" HorizontalAlignment="Left" Margin="1,2" RadiusY="2" RadiusX="2" Width="28"/>
                                    <Rectangle Fill="#E2E3E3" HorizontalAlignment="Left" Margin="29,2,0,2" Width="1"/>
                                    <Rectangle Fill="White" HorizontalAlignment="Left" Margin="30,2,0,2" Width="1"/>
                                    <ItemsPresenter x:Name="ItemsPresenter" KeyboardNavigation.DirectionalNavigation="Cycle" Grid.IsSharedSizeScope="true" Margin="2" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" KeyboardNavigation.TabNavigation="Cycle"/>
                                </Grid>
                            </ScrollViewer>
                        </Border>
                    </Themes:SystemDropShadowChrome>
                </Popup>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsSuspendingPopupAnimation" Value="true">
                    <Setter Property="PopupAnimation" TargetName="PART_Popup" Value="None"/>
                </Trigger>
                <Trigger Property="Icon" Value="{x:Null}">
                    <Setter Property="Visibility" TargetName="Icon" Value="Collapsed"/>
                </Trigger>
                <Trigger Property="IsChecked" Value="true">
                    <Setter Property="Visibility" TargetName="GlyphPanel" Value="Visible"/>
                    <Setter Property="Visibility" TargetName="Icon" Value="Collapsed"/>
                </Trigger>
                <Trigger Property="HasDropShadow" SourceName="PART_Popup" Value="true">
                    <Setter Property="Margin" TargetName="Shdw" Value="0,0,5,5"/>
                    <Setter Property="Color" TargetName="Shdw" Value="#71000000"/>
                </Trigger>
                <Trigger Property="IsHighlighted" Value="true">
                    <Setter Property="Stroke" TargetName="Bg" Value="#90717070"/>
                    <Setter Property="Stroke" TargetName="OuterBorder" Value="#50FFFFFF"/>
                    <Setter Property="Stroke" TargetName="InnerBorder" Value="#50FFFFFF"/>
                </Trigger>
                <Trigger Property="IsKeyboardFocused" Value="true">
                    <Setter Property="Stroke" TargetName="Bg" Value="#E0717070"/>
                    <Setter Property="Fill" TargetName="Bg" Value="{StaticResource MenuItemPressedFill}"/>
                    <Setter Property="Stroke" TargetName="InnerBorder" Value="#50747272"/>
                </Trigger>
                <Trigger Property="IsSubmenuOpen" Value="true">
                    <Setter Property="Stroke" TargetName="Bg" Value="#E0717070"/>
                    <Setter Property="Fill" TargetName="Bg" Value="{StaticResource MenuItemPressedFill}"/>
                    <Setter Property="Stroke" TargetName="InnerBorder" Value="#50747272"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="false">
                    <Setter Property="Foreground" Value="#FF9A9A9A"/>
                    <Setter Property="Fill" TargetName="GlyphPanel" Value="#848589"/>
                </Trigger>
                <Trigger Property="ScrollViewer.CanContentScroll" SourceName="SubMenuScrollViewer" Value="false">
                    <Setter Property="Canvas.Top" TargetName="OpaqueRect" Value="{Binding VerticalOffset, ElementName=SubMenuScrollViewer}"/>
                    <Setter Property="Canvas.Left" TargetName="OpaqueRect" Value="{Binding HorizontalOffset, ElementName=SubMenuScrollViewer}"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <ControlTemplate x:Key="{ComponentResourceKey ResourceId=TopLevelItemTemplateKey, TypeInTargetAssembly={x:Type MenuItem}}" TargetType="{x:Type MenuItem}">
            <Grid SnapsToDevicePixels="true">
                <Rectangle x:Name="OuterBorder" RadiusY="2" RadiusX="2"/>
                <Rectangle x:Name="Bg" Fill="{TemplateBinding Background}" Margin="1" RadiusY="1" RadiusX="1" Stroke="{TemplateBinding BorderBrush}" StrokeThickness="1"/>
                <Rectangle x:Name="InnerBorder" Margin="2"/>
                <DockPanel>
                    <ContentPresenter x:Name="Icon" ContentSource="Icon" Margin="4,0,6,0" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="Center"/>
                    <Path x:Name="GlyphPanel" Data="{StaticResource Checkmark}" Fill="{TemplateBinding Foreground}" FlowDirection="LeftToRight" Margin="7,0,0,0" Visibility="Collapsed" VerticalAlignment="Center"/>
                    <ContentPresenter ContentSource="Header" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                </DockPanel>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="Icon" Value="{x:Null}">
                    <Setter Property="Visibility" TargetName="Icon" Value="Collapsed"/>
                </Trigger>
                <Trigger Property="IsChecked" Value="true">
                    <Setter Property="Visibility" TargetName="GlyphPanel" Value="Visible"/>
                    <Setter Property="Visibility" TargetName="Icon" Value="Collapsed"/>
                </Trigger>
                <Trigger Property="IsHighlighted" Value="true">
                    <Setter Property="Stroke" TargetName="Bg" Value="#90717070"/>
                    <Setter Property="Stroke" TargetName="OuterBorder" Value="#50FFFFFF"/>
                    <Setter Property="Stroke" TargetName="InnerBorder" Value="#50FFFFFF"/>
                </Trigger>
                <Trigger Property="IsKeyboardFocused" Value="true">
                    <Setter Property="Stroke" TargetName="Bg" Value="#E0717070"/>
                    <Setter Property="Fill" TargetName="Bg" Value="{StaticResource MenuItemPressedFill}"/>
                    <Setter Property="Stroke" TargetName="InnerBorder" Value="#50747272"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="false">
                    <Setter Property="Foreground" Value="#FF9A9A9A"/>
                    <Setter Property="Fill" TargetName="GlyphPanel" Value="#848589"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <Geometry x:Key="RightArrow">M 0,0 L 4,3.5 L 0,7 Z</Geometry>
        <ControlTemplate x:Key="{ComponentResourceKey ResourceId=SubmenuHeaderTemplateKey, TypeInTargetAssembly={x:Type MenuItem}}" TargetType="{x:Type MenuItem}">
            <Grid x:Name="grid" SnapsToDevicePixels="true" Background="#009E8F8F">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition MinWidth="24" SharedSizeGroup="MenuItemIconColumnGroup" Width="Auto"/>
                        <ColumnDefinition Width="4"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="37"/>
                        <ColumnDefinition SharedSizeGroup="MenuItemIGTColumnGroup" Width="Auto"/>
                        <ColumnDefinition Width="17"/>
                    </Grid.ColumnDefinitions>
                    <ContentPresenter x:Name="Icon" ContentSource="Icon" Margin="1" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="Center"/>
                    <Border x:Name="GlyphPanel" BorderBrush="#CDD3E6" BorderThickness="1" Background="#E6EFF4" CornerRadius="3" Height="22" Margin="1" Visibility="Hidden" Width="22">
                        <Path x:Name="Glyph" Data="{StaticResource Checkmark}" Fill="#0C12A1" FlowDirection="LeftToRight" Height="11" Width="9"/>
                    </Border>
                    <ContentPresenter Grid.Column="2" ContentSource="Header" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                    <TextBlock Grid.Column="4" Margin="{TemplateBinding Padding}" Text="{TemplateBinding InputGestureText}" Visibility="Collapsed"/>
                    <Path Grid.Column="5" Data="{StaticResource RightArrow}" Fill="{TemplateBinding Foreground}" Margin="4,0,0,0" VerticalAlignment="Center"/>
                </Grid>
                <Popup x:Name="PART_Popup" AllowsTransparency="true" Focusable="false" HorizontalOffset="-2" IsOpen="{Binding IsSubmenuOpen, RelativeSource={RelativeSource TemplatedParent}}" PopupAnimation="{DynamicResource {x:Static SystemParameters.MenuPopupAnimationKey}}" Placement="Right" VerticalOffset="-3">
                    <Grid Height="Auto" Width="Auto" Background="{x:Null}">
                        <Border x:Name="SubMenuBorder" BorderBrush="#FF262626" BorderThickness="1" Background="#FF4C4C4F" Margin="0,0,5,5">
                            <Border.Effect>
                                <DropShadowEffect Color="#FF262626" Direction="315" BlurRadius="5" ShadowDepth="3" Opacity="0.5" />
                            </Border.Effect>
                            <ScrollViewer x:Name="SubMenuScrollViewer" Margin="0" Style="{DynamicResource {ComponentResourceKey ResourceId=MenuScrollViewer, TypeInTargetAssembly={x:Type FrameworkElement}}}" VerticalScrollBarVisibility="Disabled" HorizontalScrollBarVisibility="Disabled">
                                <Grid RenderOptions.ClearTypeHint="Enabled" Background="{x:Null}" Margin="0,8">
                                    <ItemsPresenter x:Name="ItemsPresenter" KeyboardNavigation.DirectionalNavigation="Cycle" Grid.IsSharedSizeScope="true" Margin="2" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" KeyboardNavigation.TabNavigation="Cycle"/>
                                </Grid>
                            </ScrollViewer>
                        </Border>
                    </Grid>
                </Popup>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsSuspendingPopupAnimation" Value="true">
                    <Setter Property="PopupAnimation" TargetName="PART_Popup" Value="None"/>
                </Trigger>
                <Trigger Property="IsHighlighted" Value="true"/>
                <Trigger Property="Icon" Value="{x:Null}">
                    <Setter Property="Visibility" TargetName="Icon" Value="Collapsed"/>
                </Trigger>
                <Trigger Property="IsChecked" Value="true">
                    <Setter Property="Visibility" TargetName="GlyphPanel" Value="Visible"/>
                    <Setter Property="Visibility" TargetName="Icon" Value="Collapsed"/>
                </Trigger>
                <Trigger Property="HasDropShadow" SourceName="PART_Popup" Value="true"/>
                <Trigger Property="IsHighlighted" Value="true">
                    <Setter Property="Background" TargetName="grid" Value="#FF5695DB"/>
                    <Setter Property="Margin" TargetName="grid" Value="1,0"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="false">
                    <Setter Property="Foreground" Value="#FF9A9A9A"/>
                    <Setter Property="Background" TargetName="GlyphPanel" Value="#EEE9E9"/>
                    <Setter Property="BorderBrush" TargetName="GlyphPanel" Value="#DBD6D6"/>
                    <Setter Property="Fill" TargetName="Glyph" Value="#848589"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <Style x:Key="MenuItemStyleSub" TargetType="{x:Type MenuItem}">
            <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="ScrollViewer.PanningMode" Value="Both"/>
            <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
            <Setter Property="Template" Value="{DynamicResource {ComponentResourceKey ResourceId=SubmenuItemTemplateKey, TypeInTargetAssembly={x:Type MenuItem}}}"/>
            <Style.Triggers>
                <Trigger Property="Role" Value="TopLevelHeader">
                    <Setter Property="Padding" Value="7,2,8,3"/>
                    <Setter Property="Template" Value="{DynamicResource {ComponentResourceKey ResourceId=TopLevelHeaderTemplateKey, TypeInTargetAssembly={x:Type MenuItem}}}"/>
                </Trigger>
                <Trigger Property="Role" Value="TopLevelItem">
                    <Setter Property="Padding" Value="7,2,8,3"/>
                    <Setter Property="Template" Value="{DynamicResource {ComponentResourceKey ResourceId=TopLevelItemTemplateKey, TypeInTargetAssembly={x:Type MenuItem}}}"/>
                </Trigger>
                <Trigger Property="Role" Value="SubmenuHeader">
                    <Setter Property="Padding" Value="2,3,2,3"/>
                    <Setter Property="Template" Value="{DynamicResource {ComponentResourceKey ResourceId=SubmenuHeaderTemplateKey, TypeInTargetAssembly={x:Type MenuItem}}}"/>
                </Trigger>
                <Trigger Property="Role" Value="SubmenuItem">
                    <Setter Property="Padding" Value="2,3,2,3"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style x:Key="MenuItemStyle1" TargetType="{x:Type MenuItem}">
            <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="ScrollViewer.PanningMode" Value="Both"/>
            <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
            <Setter Property="Template" Value="{DynamicResource {ComponentResourceKey ResourceId=SubmenuItemTemplateKey, TypeInTargetAssembly={x:Type MenuItem}}}"/>
            <Style.Triggers>
                <Trigger Property="Role" Value="TopLevelHeader">
                    <Setter Property="Padding" Value="7,2,8,3"/>
                    <Setter Property="Template" Value="{DynamicResource {ComponentResourceKey ResourceId=TopLevelHeaderTemplateKey, TypeInTargetAssembly={x:Type MenuItem}}}"/>
                </Trigger>
                <Trigger Property="Role" Value="TopLevelItem">
                    <Setter Property="Padding" Value="7,2,8,3"/>
                    <Setter Property="Template" Value="{DynamicResource {ComponentResourceKey ResourceId=TopLevelItemTemplateKey, TypeInTargetAssembly={x:Type MenuItem}}}"/>
                </Trigger>
                <Trigger Property="Role" Value="SubmenuHeader">
                    <Setter Property="Padding" Value="2,3,2,3"/>
                    <Setter Property="Template" Value="{DynamicResource {ComponentResourceKey ResourceId=SubmenuHeaderTemplateKey, TypeInTargetAssembly={x:Type MenuItem}}}"/>
                </Trigger>
                <Trigger Property="Role" Value="SubmenuItem">
                    <Setter Property="Padding" Value="2,3,2,3"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style x:Key="ComboButtonStyle1" TargetType="{x:Type local:ComboButton}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type local:ComboButton}">
                        <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="True">
                            <ContentPresenter ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" ContentStringFormat="{TemplateBinding ContentStringFormat}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="TreeViewItemStyletest" d:IsControlPart="True" TargetType="{x:Type TreeViewItem}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="Padding" Value="1,0,0,0"/>
            <Setter Property="IsEnabled" Value="{Binding Tag, Converter={StaticResource IconEnableFromOrg}, RelativeSource={RelativeSource TemplatedParent}}"/>
            <Setter Property="ToolTip" Value="{Binding Tag.InformationWithoutGroup, RelativeSource={RelativeSource TemplatedParent}}" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type TreeViewItem}">
                        <Grid x:Name="grid" >
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition MinWidth="19" Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="24"/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>
                            <Border x:Name="border"  BorderBrush="Black" BorderThickness="0" Grid.ColumnSpan="3" HorizontalAlignment="Stretch" Height="Auto" Grid.RowSpan="1" VerticalAlignment="Stretch" Width="Auto" Margin="0" Background="#FF97C5F7"/>
                            <ToggleButton x:Name="Expander" Style="{DynamicResource SimpleTreeViewItemToggleButton}" IsChecked="{Binding IsExpanded, RelativeSource={RelativeSource TemplatedParent}}" ClickMode="Press" VerticalAlignment="Stretch" Margin="40,0,0,0"/>
                            <Border Grid.Column="1" x:Name="Selection_Border" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}" VerticalAlignment="Center" Margin="25,0,0,0">
                                <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" x:Name="PART_Header" ContentSource="Header"  Opacity="{Binding Tag, Converter={StaticResource IconOpFromOrg}, RelativeSource={RelativeSource TemplatedParent}}"/>
                            </Border>
                            <ItemsPresenter Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="1" x:Name="ItemsHost"/>
                            <Grid Margin="5,0,0,0" Grid.Column="1" Width="18" Height="18" HorizontalAlignment="Left">
                                <Border BorderBrush="Black" BorderThickness="0" Opacity="{Binding Tag, Converter={StaticResource IconOpFromOrg}, RelativeSource={RelativeSource TemplatedParent}}">
                                    <Ellipse Fill="#FF95C4F8"  Stroke="Black" StrokeThickness="0"/>
                                </Border>
                                <Border Margin="2.61">
                                    <Image  Source="{Binding Tag, Converter={StaticResource IconFromOrg}, RelativeSource={RelativeSource TemplatedParent}}" />
                                </Border>
                            </Grid>
                            <!--Image Margin="5,0,0,0" Grid.Column="1" Width="16" Height="16" HorizontalAlignment="Left" Source="{Binding Tag, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource IconFromOrg}}" Opacity="{Binding Tag, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource IconOpFromOrg}}"/ -->
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsExpanded" Value="False">
                                <Setter Property="Visibility" Value="Collapsed" TargetName="ItemsHost"/>
                                <Setter Property="Background" TargetName="border" Value="{x:Null}"/>
                            </Trigger>
                            <Trigger Property="HasItems" Value="false">
                                <Setter Property="Visibility" Value="Hidden" TargetName="Expander"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="true">
                                <Setter Property="Background" TargetName="border" Value="#FFFFFF00"/>
                                <Setter Property="Background" TargetName="Selection_Border" Value="{x:Null}"/>
                            </Trigger>
                            <!--<MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsSelected" Value="true"/>
                                <Condition Property="IsSelectionActive" Value="false"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
                            <Setter Property="Background" TargetName="grid" Value="#FFFFFF00"/>
                            <Setter Property="Background" TargetName="border" Value="#FFFFFF00"/>
                        </MultiTrigger>-->
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                                <Setter Property="Background" TargetName="border" Value="#FFF3F3F3"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" TargetName="border" Value="#FF97C5F7"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
    </local:MyWindow.Resources>

    <!--<local:MyWindow.CommandBindings>
        <CommandBinding Command="local:ShortCutKey.NewCall" Executed="OenDospatch"/>
        -->
    <!--<CommandBinding Command="local:ShortCutKey.NewCall" Executed="local:MainMenu.OenDospatch" />-->
    <!--
    </local:MyWindow.CommandBindings>-->

    <Grid Margin="0">
        <Grid.RowDefinitions>
            <RowDefinition Height="52*"/>
            <RowDefinition Height="3*"/>
        </Grid.RowDefinitions>
        <DockPanel Grid.RowSpan="2">
            <Border x:Name="bdr_Header" BorderBrush="Black" BorderThickness="0" Margin="0" DockPanel.Dock="Top" Height="40" Background="#FF3B3B3D">
                <Grid>
                    <DockPanel LastChildFill="False" Margin="0" HorizontalAlignment="Left" Width="150">
                        <Image Margin="0" Source="/TrboX;component/resource/images/main_title_136_40.png"/>
                    </DockPanel>
                    <Button x:Name="btn_Header"  Style="{StaticResource ButtonStyleHdr}"/>
                    <Menu Style="{DynamicResource MenuStyleNormal}" HorizontalAlignment="Left" Margin="150,0,0,0">
                        <MenuItem Header="文件(_F)" Margin="0,0,5,0" Style="{DynamicResource MenuItemStyleTilte}" HorizontalAlignment="Left" VerticalAlignment="Center" Foreground="White" FontSize="14" FontFamily="Hiragino Sans GB W3" InputGestureText="F" Height="28">
                            <MenuItem Header="新建" Height="28" Margin="1,0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top">
                                <MenuItem x:Name="menu_File_NewDispatch" Header="语音调度" InputGestureText="Ctrl+N"  Height="28" Margin="0" VerticalAlignment="Top" Style="{DynamicResource MenuItemStyleSub}" />
                                <MenuItem x:Name="menu_File_NewMessage" Header="短消息" Height="28" Margin="0" Style="{DynamicResource MenuItemStyleSub}" VerticalAlignment="Top" />
                                <MenuItem x:Name="menu_File_NewPosition" Header="位置查询" Height="28" Margin="0" Style="{DynamicResource MenuItemStyleSub}" VerticalAlignment="Top" />
                                <MenuItem x:Name="menu_File_NewControl" Header="指令控制" Height="28" Margin="0" Style="{DynamicResource MenuItemStyleSub}" VerticalAlignment="Top" />
                                <MenuItem x:Name="menu_File_NewJobTicket" Header="工单" Height="28" Margin="0" Style="{DynamicResource MenuItemStyleSub}" VerticalAlignment="Top" Visibility="Collapsed" />
                                <MenuItem x:Name="menu_File_NewTracker" Header="巡更任务" Height="28" Margin="0" Style="{DynamicResource MenuItemStyleSub}" VerticalAlignment="Top" Visibility="Collapsed" />
                            </MenuItem>
                            <MenuItem  x:Name="menu_File_Save" Header="保存" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsEnabled="{Binding NeedSave, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:Main}}}"/>
                            <Separator Margin="1,0" Style="{DynamicResource SeparatorStyleNormal}" BorderBrush="{x:Null}" Background="{x:Null}" Foreground="{DynamicResource CutOffRule}" Height="16"/>
                            <MenuItem x:Name="menu_File_Export" Header="导出" Height="28" Margin="1,0" Style="{DynamicResource MenuItemStyleSub}" VerticalAlignment="Top" Foreground="White"/>
                            <MenuItem x:Name="menu_File_Print" Header="打印" Height="28" Margin="1,0" Style="{DynamicResource MenuItemStyleSub}" VerticalAlignment="Top" Foreground="White"/>
                            <Separator Margin="1,0" Style="{DynamicResource SeparatorStyleNormal}" Height="16"/>
                            <MenuItem x:Name="menu_File_Exit" Header="退出TrboX" Height="28" Margin="1,0" Style="{DynamicResource MenuItemStyleSub}" VerticalAlignment="Top" Foreground="White"/>
                        </MenuItem>
                        <MenuItem Header="视图(_V)" Margin="5,0" Style="{DynamicResource MenuItemStyleTilte}" HorizontalAlignment="Left" VerticalAlignment="Center" Foreground="White" FontSize="14" FontFamily="Hiragino Sans GB W3" Height="28">
                            <MenuItem Header="工具栏" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top">
                                <MenuItem Header="标准" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True" IsEnabled="False"/>
                                <MenuItem x:Name="menu_View_Tool_Base" Header="基本操作" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True"/>
                                <MenuItem x:Name="menu_View_Tool_Fast" Header="快速面板" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True"/>
                                <MenuItem x:Name="menu_View_Tool_Ctrl" Header="信令" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True"/>
                                <MenuItem x:Name="menu_View_Tool_Help" Header="帮助" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True"/>
                            </MenuItem>
                            <MenuItem Header="资源管理" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top">
                                <MenuItem x:Name="menu_View_Mgr_Org" Header="组织" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True"/>
                                <MenuItem x:Name="menu_View_Mgr_Group" Header="组" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True"/>
                                <MenuItem x:Name="menu_View_Mgr_Employee" Header="人员" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True"/>
                                <MenuItem x:Name="menu_View_Mgr_Vehicle" Header="车辆" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True"/>
                                <MenuItem x:Name="menu_View_Mgr_Device" Header="设备" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True"/>
                            </MenuItem>
                            <MenuItem Header="导航窗口" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top">
                                <MenuItem Header="语音调度" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True" IsEnabled="False"/>
                                <MenuItem x:Name="menu_View_Nav_Map" Header="地图" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True"/>
                                <MenuItem x:Name="menu_View_Nav_Recording" Header="录音" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True"/>
                                <MenuItem x:Name="menu_View_Nav_Report" Header="报表" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True"/>
                            </MenuItem>
                            <MenuItem x:Name="menu_View_Event" Header="事件窗口" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True"/>
                            <MenuItem Header="消息窗口" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top">
                                <MenuItem x:Name="menu_View_Msg_Alarm" Header="报警" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True"/>
                                <MenuItem x:Name="menu_View_Msg_ShortMsg" Header="短消息" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True"/>
                                <MenuItem x:Name="menu_View_Msg_Rx" Header="被叫记录" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True"/>
                                <MenuItem x:Name="menu_View_Msg_Job" Header="工单" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True"/>
                                <MenuItem x:Name="menu_View_Msg_Tracker" Header="巡更" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" IsChecked="True"/>
                            </MenuItem>
                        </MenuItem>
                        <MenuItem x:Name="menu_Target" Header="目标(_O)" Margin="5,0" Style="{DynamicResource MenuItemStyleTilte}" HorizontalAlignment="Left" VerticalAlignment="Center" Foreground="White" FontSize="14" FontFamily="Hiragino Sans GB W3" Height="28" Visibility="Collapsed">
                            <MenuItem x:Name="menu_Target_Check" Header="在线检测" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                            <MenuItem x:Name="menu_Target_Monitor" Header="远程监听" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                            <Separator Margin="1,0" Style="{DynamicResource SeparatorStyleNormal}" Height="16"/>
                            <MenuItem  x:Name="menu_Target_Call" Header="呼叫" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" />
                            <MenuItem  x:Name="menu_Target_Message" Header="短消息" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" />
                            <MenuItem Header="位置查询" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top">
                                <MenuItem  x:Name="menu_Target_Position"  Header="查询" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                                <MenuItem x:Name="menu_Target_PositionCycle"  Header="周期查询" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                                <Separator Margin="1,0" Style="{DynamicResource SeparatorStyleNormal}" Height="16"/>
                                <MenuItem x:Name="menu_Target_PositionCSBK"  Header="CSBK查询" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                                <MenuItem x:Name="menu_Target_PositionCSBKCycle"  Header="CSBK周期查询" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                                <Separator Margin="1,0" Style="{DynamicResource SeparatorStyleNormal}" Height="16"/>
                                <MenuItem x:Name="menu_Target_PositionEnh"  Header="CSBK增强型查询" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                                <MenuItem x:Name="menu_Target_PositionEnhCycle"  Header="CSBK增强型周期查询" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                                <Separator Margin="1,0" Style="{DynamicResource SeparatorStyleNormal}" Height="16"/>
                                <MenuItem x:Name="menu_Target_Trail"  Header="轨迹回放" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                            </MenuItem>
                            <MenuItem Header="指令控制" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top">
                                <MenuItem x:Name="menu_Target_StartUp"  Header="遥开" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                                <MenuItem x:Name="menu_Target_Shut" Header="遥毙" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                                <MenuItem x:Name="menu_Target_Sleep" Header="遥晕" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                                <MenuItem x:Name="menu_Target_Week" Header="遥醒" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                            </MenuItem>
                            <Separator Margin="1,0" Style="{DynamicResource SeparatorStyleNormal}" Height="16"/>
                            <MenuItem x:Name="menu_Target_JobTicket" Header="工单" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                        </MenuItem>
                        <MenuItem Header="录音(_R)" Margin="5,0" Style="{DynamicResource MenuItemStyleTilte}" Visibility="{Binding IsChecked, Converter={StaticResource FalseHide}, ElementName=rad_Nav_Recording}" HorizontalAlignment="Left" VerticalAlignment="Center" Foreground="White" FontSize="14" FontFamily="Hiragino Sans GB W3" Height="28">
                            <MenuItem x:Name="menu_Rec_Update"   Header="更新" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                            <MenuItem x:Name="menu_Rec_Search" Header="查询" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                            <MenuItem x:Name="menu_Rec_Replay" Header="回放" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                            <Separator Margin="1,0" Style="{DynamicResource SeparatorStyleNormal}" Height="16"/>
                            <MenuItem x:Name="menu_Rec_Import"  Header="导入" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                            <MenuItem x:Name="menu_Rec_Export" Header="导出" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                        </MenuItem>
                        <MenuItem Header="巡更(_X)" Margin="5,0" Style="{DynamicResource MenuItemStyleTilte}" HorizontalAlignment="Left" VerticalAlignment="Center" Foreground="White" FontSize="14" FontFamily="Hiragino Sans GB W3" Height="28" Visibility="Collapsed">
                            <MenuItem x:Name="menu_Tracker_Task" Header="任务列表" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                            <MenuItem x:Name="menu_Tracker_NewTask" Header="新建常规任务" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                            <MenuItem  x:Name="menu_Tracker_NewTimeTask" Header="新建定时任务" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                            <Separator Margin="1,0" Style="{DynamicResource SeparatorStyleNormal}" Height="15"/>
                            <MenuItem  x:Name="menu_Tracker_Tracker" Header="跟踪" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                        </MenuItem>
                        <MenuItem Header="工具(_T)" Margin="5,0" Style="{DynamicResource MenuItemStyleTilte}" HorizontalAlignment="Left" VerticalAlignment="Center" Foreground="White" FontSize="14" FontFamily="Hiragino Sans GB W3" Height="28">
                            <MenuItem  x:Name="menu_Tools_NewContact" Header="新建常用联系人" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                            <MenuItem x:Name="menu_Tools_NewOperate" Header="新建快速操作" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                            <Separator Margin="1,0" Style="{DynamicResource SeparatorStyleNormal}" Height="16"/>
                            <MenuItem x:Name="menu_Tools_Export" Header="导出配置" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                            <MenuItem x:Name="menu_Tools_Import" Header="导入配置" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                            <MenuItem x:Name="menu_Tools_Potions" Header="选项" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                        </MenuItem>
                        <MenuItem Header="帮助(_H)" Style="{DynamicResource MenuItemStyleTilte}" Margin="5,0" HorizontalAlignment="Left" VerticalAlignment="Center" Foreground="White" FontSize="14" FontFamily="Hiragino Sans GB W3" Height="28">
                            <MenuItem x:Name="menu_Help_Look" Header="查看帮助" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top"/>
                            <MenuItem x:Name="menu_Help_About" Header="关于TrboX" Height="28" Margin="0" Style="{DynamicResource MenuItemStyle1}" VerticalAlignment="Top" Click="menu_Help_About_Click"/>
                        </MenuItem>
                    </Menu>
                    <DockPanel LastChildFill="False" HorizontalAlignment="Right">
                        <DockPanel LastChildFill="False" Margin="0"  HorizontalAlignment="Right" DockPanel.Dock="Right">

                            <!--<Image x:Name="img_SysClose" Source="/TrboX;component/themes/resource/sys-1.png" Stretch="None" Height="22" Width="122" DockPanel.Dock="Right"/>
            				<Image x:Name="img_SysRestore" Source="/TrboX;component/themes/resource/sys-2.png" Stretch="None" Visibility="Hidden" Height="20" Width="79" DockPanel.Dock="Right"/>
            				<Image x:Name="img_SysMax" Source="/TrboX;component/themes/resource/sys-1.png" Stretch="None" Height="22" Width="78" DockPanel.Dock="Right" />
            				<Image x:Name="img_SysMin" Source="/TrboX;component/themes/resource/sys-1.png" Stretch="None" Height="3" Width="12" DockPanel.Dock="Right" VerticalAlignment="Bottom" HorizontalAlignment="Center" Margin="0,0,0,16"/>-->
                            <local:IconBtn x:Name="btn_SysClose" Height="18" VerticalAlignment="Center" DockPanel.Dock="Right" Width="18" Margin="8,0,11,0" Normal="/TrboX;component/resource/images/close_18_18_n.png" Hover="/TrboX;component/resource/images/close_18_18_h.png" HorizontalAlignment="Center" Press="/TrboX;component/resource/images/close_18_18_h.png"/>
                            <local:IconBtn x:Name="btn_SysRestore" Height="18" VerticalAlignment="Center" DockPanel.Dock="Right" Width="18" Margin="8,0,7,0" Normal="/TrboX;component/resource/images/restore_18_18_n.png" Hover="/TrboX;component/resource/images/restore_18_18_h.png" HorizontalAlignment="Center" Press="/TrboX;component/resource/images/restore_18_18_h.png"/>
                            <local:IconBtn x:Name="btn_SysMax" Height="18" VerticalAlignment="Center" DockPanel.Dock="Right" Width="18" Margin="8,0" Normal="/TrboX;component/resource/images/max_18_18_n.png" Hover="/TrboX;component/resource/images/max_18_18_h.png" HorizontalAlignment="Center" Press="/TrboX;component/resource/images/min_18_18_h.png"/>
                            <local:IconBtn x:Name="btn_SysMin" Height="18" VerticalAlignment="Center" DockPanel.Dock="Right" Width="18" Margin="8,0" Normal="/TrboX;component/resource/images/min_18_18_n.png" Hover="/TrboX;component/resource/images/min_18_18_h.png" HorizontalAlignment="Center" Press="/TrboX;component/resource/images/min_18_18_h.png"/>
                        </DockPanel>
                        <Grid DockPanel.Dock="Right" Margin="0,0,10,0" d:IsLocked="True">
                            <Label Content="当前账户：Admin" VerticalAlignment="Center" Foreground="#FFABABAB" Margin="0,0,50,0"/>
                        </Grid>
                    </DockPanel>
                    <Path Data="M6.8333333,30 L178.16667,30" Height="1" Margin="-0.5,0" Stretch="Fill" VerticalAlignment="Bottom" Stroke="{DynamicResource CutOffRuleButtom}" d:IsHidden="True"/>
                </Grid>
            </Border>

            <Border BorderBrush="#FF0F0F10" BorderThickness="0,0,0,1" Height="40" DockPanel.Dock="Top" Margin="0" Panel.ZIndex="1" Background="#FF3B3B3D">
                <DockPanel LastChildFill="False">
                    <Path Data="M6.8333333,30 L178.16667,30" Height="1" Margin="-0.5,0" Stretch="Fill" VerticalAlignment="Top" DockPanel.Dock="Top" Stroke="{DynamicResource CutOffRuleTop}"/>
                    <Border BorderBrush="White" BorderThickness="0" HorizontalAlignment="Left" Padding="0,8">
                        <DockPanel LastChildFill="False" Margin="0">
                            <Border BorderBrush="#FF1C1D1E" BorderThickness="0,0,1,0" Height="22" VerticalAlignment="Top" Margin="17,0,0,0" HorizontalAlignment="Left" Padding="5,0,0,0">
                                <local:ListBtn VOffset="8"  Margin="5,0" Normal="/TrboX;component/resource/images/new_22_22_n.png" Height="22" Hover="/TrboX;component/resource/images/new_22_22_h.png" Press="/TrboX;component/resource/images/new_22_22_p.png" Disable="/TrboX;component/resource/images/new_22_22_d.png" Width="48" >
                                    <local:ListBtn.Items>
                                        <ComboBoxItem Content="新建短消息" Style="{DynamicResource ComboBoxItemStyle1}" Height="28" Foreground="White"/>
                                        <ComboBoxItem Content="新建位置查询" Style="{DynamicResource ComboBoxItemStyle1}" Height="28"  Width="120" Foreground="White"/>
                                        <ComboBoxItem Content="新建指令控制" Style="{DynamicResource ComboBoxItemStyle1}" Height="28" Foreground="White"/>
                                        <ComboBoxItem Content="新建工单" Style="{DynamicResource ComboBoxItemStyle1}" Height="28" Foreground="White"/>
                                        <ComboBoxItem Content="新建巡更任务" Style="{DynamicResource ComboBoxItemStyle1}" Height="28" Foreground="White"/>
                                    </local:ListBtn.Items>
                                </local:ListBtn>
                            </Border>

                            <Border BorderBrush="#FF1C1D1E" BorderThickness="0,0,1,0" Margin="0" Padding="5,0,3,0">
                                <DockPanel LastChildFill="False">
                                    <local:ListBtn VOffset="8"  Margin="5,0" Normal="/TrboX;component/resource/images/new_22_22_n.png" Height="22" Hover="/TrboX;component/resource/images/new_22_22_h.png" Press="/TrboX;component/resource/images/new_22_22_p.png" Disable="/TrboX;component/resource/images/new_22_22_d.png" Width="109" BorderThickness="1" Tag="0,4,4,0" Background="#FFC6E441" BorderBrush="#FF2F28BD" Template="{DynamicResource ListBtnTemplate}" Content="Testtest" IsSuper="True" Visibility="Collapsed" >
                                        <local:ListBtn.Items>
                                            <ComboBoxItem Content="新建短消息" Style="{DynamicResource ComboBoxItemStyle1}" Height="28" Foreground="White"/>
                                            <ComboBoxItem Content="新建位置查询" Style="{DynamicResource ComboBoxItemStyle1}" Height="28"  Width="120" Foreground="White"/>
                                            <ComboBoxItem Content="新建指令控制" Style="{DynamicResource ComboBoxItemStyle1}" Height="28" Foreground="White"/>
                                            <ComboBoxItem Content="新建工单" Style="{DynamicResource ComboBoxItemStyle1}" Height="28" Foreground="White"/>
                                            <ComboBoxItem Content="新建巡更任务" Style="{DynamicResource ComboBoxItemStyle1}" Height="28" Foreground="White"/>
                                        </local:ListBtn.Items>
                                    </local:ListBtn>
                                    <local:IconBtn Height="22" VerticalAlignment="Center" Margin="5,0" Width="22" Disable="/TrboX;component/resource/images/save_22_22_d.png" Hover="/TrboX;component/resource/images/save_22_22_h.png" Normal="/TrboX;component/resource/images/save_22_22_n.png" Press="/TrboX;component/resource/images/save_22_22_p.png" ToolTip="保存"/>
                                    <local:IconBtn Height="22" VerticalAlignment="Center" Margin="5,0" Width="22" Disable="/TrboX;component/resource/images/remove_22_22_d.png" Hover="/TrboX;component/resource/images/remove_22_22_h.png" Normal="/TrboX;component/resource/images/remove_22_22_n.png" Press="/TrboX;component/resource/images/remove_22_22_p.png" ToolTip="删除"/>
                                </DockPanel>
                            </Border>
                            <Border x:Name="bdr_Tool_Base" BorderBrush="#FF1C1D1E" BorderThickness="0,0,1,0" Margin="0" Padding="5,0,3,0" IsEnabled="False">
                                <DockPanel LastChildFill="False" Margin="0">
                                    <local:IconBtn x:Name="btn_Tool_PTT" ToolTip="呼叫" Height="22" VerticalAlignment="Center" Margin="5,0" Width="22" Disable="/TrboX;component/resource/images/call_22_22_d.png" Hover="/TrboX;component/resource/images/call_22_22_h.png" Normal="/TrboX;component/resource/images/call_22_22_n.png" Press="/TrboX;component/resource/images/call_22_22_p.png"/>
                                    <local:IconBtn x:Name="btn_Tool_Msg" ToolTip="短消息" Height="22" VerticalAlignment="Center" Margin="5,0" Width="22" Disable="/TrboX;component/resource/images/short_message_22_22_d.png" Hover="/TrboX;component/resource/images/short_message_22_22_h.png" Normal="/TrboX;component/resource/images/short_message_22_22_n.png" Press="/TrboX;component/resource/images/short_message_22_22_p.png"/>
                                    <local:IconBtn x:Name="btn_Tool_Position" ToolTip="位置查询" Height="22" VerticalAlignment="Center" Margin="5,0" Width="22" Disable="/TrboX;component/resource/images/position_22_22_d.png" Hover="/TrboX;component/resource/images/position_22_22_h.png" Normal="/TrboX;component/resource/images/position_22_22_n.png" Press="/TrboX;component/resource/images/position_22_22_p.png"/>
                                    <local:IconBtn x:Name="btn_Tool_Job" ToolTip="工单" Height="22" VerticalAlignment="Center" Margin="5,0" Width="22" Disable="/TrboX;component/resource/images/job_tickets_22_22_d.png" Hover="/TrboX;component/resource/images/job_tickets_22_22_h.png" Normal="/TrboX;component/resource/images/job_tickets_22_22_n.png" Press="/TrboX;component/resource/images/job_tickets_22_22_p.png" Visibility="Collapsed"/>
                                </DockPanel>
                            </Border>
                            <Border x:Name="bdr_Tool_Fast" BorderBrush="#FF1C1D1E" BorderThickness="0,0,1,0" Margin="0" Padding="5,0,3,0">
                                <DockPanel LastChildFill="False" Margin="0">
                                    <local:IconBtn x:Name="btn_Tool_NewContact" Normal="/TrboX;component/resource/images/new_contact_22_22_n.png" Margin="5,0" VerticalAlignment="Center" ToolTip="添加常用联系人" Width="22" Disable="/TrboX;component/resource/images/new_contact_22_22_d.png" Hover="/TrboX;component/resource/images/new_contact_22_22_h.png" Press="/TrboX;component/resource/images/new_contact_22_22_p.png" />
                                    <local:IconBtn x:Name="btn_Tool_NewFastOperate" Normal="/TrboX;component/resource/images/new_operate_22_22_n.png" Margin="5,0" VerticalAlignment="Center" ToolTip="添加快速操作" Width="22" Disable="/TrboX;component/resource/images/new_operate_22_22_d.png" Hover="/TrboX;component/resource/images/new_operate_22_22_h.png" Press="/TrboX;component/resource/images/new_operate_22_22_p.png" />
                                </DockPanel>
                            </Border>
                            <Border x:Name="bdr_Tool_Ctrl" BorderBrush="#FF1C1D1E" BorderThickness="0,0,1,0" Margin="0" Padding="5,0,3,0" IsEnabled="False">
                                <DockPanel LastChildFill="False" Margin="0">
                                    <local:IconBtn x:Name="btn_Tool_Check" Normal="/TrboX;component/resource/images/online_check_22_22_n.png" Margin="5,0" VerticalAlignment="Center" ToolTip="在线检测" Click="btn_Tool_Check_Click" Hover="/TrboX;component/resource/images/online_check_22_22_h.png" Disable="/TrboX;component/resource/images/online_check_22_22_d.png" Press="/TrboX;component/resource/images/online_check_22_22_p.png" Width="22" />
                                    <local:IconBtn x:Name="btn_Tool_Monitor" Normal="/TrboX;component/resource/images/minitor_22_22_n.png" Margin="5,0" VerticalAlignment="Center" ToolTip="远程监听" Click="btn_Tool_Monitor_Click" Hover="/TrboX;component/resource/images/minitor_22_22_h.png" Disable="/TrboX;component/resource/images/minitor_22_22_d.png" Press="/TrboX;component/resource/images/minitor_22_22_p.png" Width="22" />
                                    <local:IconBtn x:Name="btn_Tool_Start" Normal="/TrboX;component/resource/images/power_up_22_22_n.png" Margin="5,0" VerticalAlignment="Center" ToolTip="遥开" Hover="/TrboX;component/resource/images/power_up_22_22_h.png" Disable="/TrboX;component/resource/images/power_up_22_22_d.png" Press="/TrboX;component/resource/images/power_up_22_22_p.png" Width="22" />
                                    <local:IconBtn x:Name="btn_Tool_Shut" Normal="/TrboX;component/resource/images/shutdown_22_22_n.png" Margin="5,0" VerticalAlignment="Center" ToolTip="遥毙" Hover="/TrboX;component/resource/images/shutdown_22_22_h.png" Disable="/TrboX;component/resource/images/shutdown_22_22_d.png" Press="/TrboX;component/resource/images/shutdown_22_22_p.png" Width="22" />
                                    <local:IconBtn x:Name="btn_Tool_Sleep" Normal="/TrboX;component/resource/images/sleep_22_22_n.png" Margin="5,0" VerticalAlignment="Center" ToolTip="遥晕" Hover="/TrboX;component/resource/images/sleep_22_22_h.png" Disable="/TrboX;component/resource/images/sleep_22_22_d.png" Press="/TrboX;component/resource/images/sleep_22_22_p.png" Width="22" />
                                </DockPanel>
                            </Border>
                            <Border x:Name="bdr_Tool_Help" BorderBrush="#FF1C1D1E" BorderThickness="0" Margin="0" Padding="5,0,3,0">
                                <DockPanel LastChildFill="False" Margin="0">
                                    <local:IconBtn x:Name="btn_Help" Normal="/TrboX;component/resource/images/help_22_22_n.png" Margin="5,0" VerticalAlignment="Center" ToolTip="查看帮助" Width="22" Hover="/TrboX;component/resource/images/help_22_22_h.png" Disable="/TrboX;component/resource/images/help_22_22_d.png" Press="/TrboX;component/resource/images/help_22_22_p.png" />
                                    <local:IconBtn x:Name="btn_About" Normal="/TrboX;component/resource/images/about_22_22_n.png" Margin="5,0" VerticalAlignment="Center" ToolTip="关于TrboX" Click="btn_About_Click" Width="22" Hover="/TrboX;component/resource/images/about_22_22_h.png" Disable="/TrboX;component/resource/images/about_22_22_d.png" Press="/TrboX;component/resource/images/about_22_22_p.png"/>

                                </DockPanel>
                            </Border>
                        </DockPanel>
                    </Border>
                    <DockPanel x:Name="Rx_RadioGroup" LastChildFill="False" VerticalAlignment="Bottom" DockPanel.Dock="Right" Margin="0,0,5,2"/>
                </DockPanel>
            </Border>
            <Border BorderThickness="0,1,0,0" Margin="0" DockPanel.Dock="Bottom" Height="30" Background="#FF3B3B3D" BorderBrush="#FF0F0F10">
                <DockPanel LastChildFill="False">
                    <Path Data="M6.8333333,30 L178.16667,30" Height="1" Margin="-0.5,0" Stretch="Fill" VerticalAlignment="Top" DockPanel.Dock="Top" Stroke="{DynamicResource CutOffRuleTop}"/>
                    <Border BorderBrush="White" BorderThickness="0">
                        <DockPanel x:Name="dck_RadioStatus1" LastChildFill="False" VerticalAlignment="Center" Margin="0">
                            <Image Height="15" VerticalAlignment="Center" Width="19" Source="/TrboX;component/resource/images/notice_19_15_n.png" Margin="15,0,8,0"/>
                            <Label x:Name="lab_DeviceSta" Content="车载台：192.168.2.10" VerticalAlignment="Center" VerticalContentAlignment="Center" Foreground="#FFABABAB"/>
                        </DockPanel>
                    </Border>
                    <Border BorderBrush="#FFA68989" BorderThickness="0" DockPanel.Dock="Right">
                        <Label x:Name="lab_SysTime" Content="0000/00/00 00:00:00" VerticalAlignment="Center" HorizontalContentAlignment="Right" VerticalContentAlignment="Center" Margin="0" Foreground="#FFABABAB"/>
                    </Border>
                </DockPanel>
                <!--<src:Contact x:Name="ChoiceContact" IsMultiple="False" DockPanel.Dock="Top" Margin="0,5,0,0"/>-->
            </Border>
            <Grid Margin="0">
                <Border BorderBrush="Black" BorderThickness="0" Margin="0" Padding="0,8">
                    <Grid x:Name="grd_main">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition MinWidth="100" Width="308"/>
                            <ColumnDefinition MinWidth="100"/>
                            <ColumnDefinition MinWidth="100" Width="260"/>
                        </Grid.ColumnDefinitions>
                        <Grid x:Name="grd_Nav" Margin="0,0,8,0">
                            <Grid.RowDefinitions>
                                <RowDefinition x:Name="grd_Row_Mgr" MinHeight="34"/>
                                <RowDefinition Height="83"  MaxHeight="83" MinHeight="42"/>
                            </Grid.RowDefinitions>
                            <Border BorderBrush="#FF0F0F10" BorderThickness="1" Margin="0,0,0,8" Background="#FF3B3B3D">
                                <DockPanel>
                                    <Path Data="M6.8333333,30 L178.16667,30" Height="1" Margin="-0.5,0" Stretch="Fill" VerticalAlignment="Top" DockPanel.Dock="Top" Stroke="{DynamicResource BorderTop}"/>
                                    <Border BorderBrush="#FF0F0F10" BorderThickness="0,0,0,1" Height="33" VerticalAlignment="Top" DockPanel.Dock="Top" Background="#FF242424">
                                        <TextBlock TextWrapping="Wrap" Text="{Binding SelectedItem.Header, ElementName=tab_Mgr}" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="13,0,0,0" Foreground="#FFC9CDD2" FontSize="14"/>
                                    </Border>
                                    <Border BorderBrush="Black" BorderThickness="0,0,0,1" Height="48" DockPanel.Dock="Top">
                                        <Grid>
                                            <TextBox x:Name="txt_ResCondition" Margin="8" VerticalContentAlignment="Center" Padding="8,0,25,0" BorderBrush="#FF48484A" Background="#FF272727" Foreground="#FF747679" Style="{DynamicResource TextBoxStyleSearch}"/>
                                            <local:IconBtn x:Name="btn_ResSearch" ToolTip="搜索" Height="17" VerticalAlignment="Center" Normal="/TrboX;component/resource/images/serach_21_21_n.png" Margin="0,0,15,0" VerticalContentAlignment="Center" HorizontalContentAlignment="Left" HorizontalAlignment="Right" Width="17" Hover="/TrboX;component/resource/images/serach_21_21_h.png" Press="/TrboX;component/resource/images/serach_21_21_h.png"/>
                                        </Grid>
                                    </Border>
                                    <Border BorderBrush="#FF0C0C0D" BorderThickness="0,1,0,0" DockPanel.Dock="Bottom" Height="32" Background="#FF333335">
                                        <DockPanel LastChildFill="False">
                                            <RadioButton x:Name="rad_Mgr_Org" Content="组织" Style="{DynamicResource RadioButtonMgr}" GroupName="radGroup_TragetList" IsChecked="True" Width="55" BorderThickness="0,0,1,0" Foreground="{DynamicResource fbg}" BorderBrush="#FF0C0C0D"/>
                                            <RadioButton x:Name="rad_Mgr_Group" Content="组" Style="{DynamicResource RadioButtonMgr}" GroupName="radGroup_TragetList" Width="55" BorderThickness="0,0,1,0" BorderBrush="#FF0C0C0D" Foreground="{DynamicResource fbg}"/>
                                            <RadioButton x:Name="rad_Mgr_Employee" Content="人员" Style="{DynamicResource RadioButtonMgr}" GroupName="radGroup_TragetList" Width="55" BorderThickness="0,0,1,0" Foreground="{DynamicResource fbg}" BorderBrush="#FF0C0C0D"/>
                                            <RadioButton x:Name="rad_Mgr_Vehicle" Content="车辆" Style="{DynamicResource RadioButtonMgr}" Width="55" GroupName="radGroup_TragetList" BorderThickness="0,0,1,0" Foreground="{DynamicResource fbg}" BorderBrush="#FF0C0C0D"/>
                                            <RadioButton x:Name="rad_Mgr_Device" Content="设备" Style="{DynamicResource RadioButtonMgr}" Width="55" GroupName="radGroup_TragetList" BorderThickness="0,0,1,0" Foreground="{DynamicResource fbg}" BorderBrush="#FF0C0C0D"/>
                                        </DockPanel>
                                    </Border>
                                    <Border x:Name="bdr_MaskMgrTab" BorderBrush="Black" BorderThickness="0" DockPanel.Dock="Top" ClipToBounds="True">
                                        <TabControl x:Name="tab_Mgr"  BorderThickness="0" Focusable="False" IsTabStop="True" IsSynchronizedWithCurrentItem="True" Margin="0,-22,0,0" Style="{DynamicResource TabControlStyleNormal}"  >
                                            <TabControl.SelectedIndex>
                                                <MultiBinding  Converter="{StaticResource IndexFromRadio}" Mode="OneWay">
                                                    <Binding ElementName="rad_Mgr_Org" Path="IsChecked" />
                                                    <Binding ElementName="rad_Mgr_Group" Path="IsChecked" />
                                                    <Binding ElementName="rad_Mgr_Employee" Path="IsChecked" />
                                                    <Binding ElementName="rad_Mgr_Vehicle" Path="IsChecked" />
                                                    <Binding ElementName="rad_Mgr_Device" Path="IsChecked" />
                                                </MultiBinding>
                                            </TabControl.SelectedIndex>
                                            <TabItem x:Name="tab_Mgr_Org" Header="组织" Style="{DynamicResource SimpleTabItem}" Width="10">
                                                <DockPanel>
                                                    <TreeView x:Name="tree_OrgView" Style="{DynamicResource TreeViewStyleNav}" BorderThickness="0" Margin="0,6" SelectedItemChanged="tree_OrgView_SelectedItemChanged" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto" Background="{x:Null}" BorderBrush="{x:Null}" Padding="0" >
                                                        <!--<TreeViewItem  Header="根目录" Style="{DynamicResource TreeViewItemStyleRoot}" IsExpanded="True">
                                                    		<TreeViewItem Header="TreeViewItem" HorizontalAlignment="Left" Width="310" IsExpanded="True" Style="{DynamicResource TreeViewItemStyle2nd}">
                                                    			<TreeViewItem Header="TreeViewItem" Style="{DynamicResource TreeViewItemStyle3rd}"/>
                                                    		</TreeViewItem>
                                                    		<TreeViewItem Header="TreeViewItem" HorizontalAlignment="Left" Width="310" IsExpanded="True" Style="{DynamicResource TreeViewItemStyle2nd}">
                                                    			<TreeViewItem Header="TreeViewItem" Style="{DynamicResource TreeViewItemStyle2nd}"/>
                                                    		</TreeViewItem>
                                                    	</TreeViewItem>
                                                    	<TreeViewItem  Header="根目录" Style="{DynamicResource TreeViewItemStyleRoot}" IsExpanded="True">
                                                    		<TreeViewItem Header="TreeViewItem" HorizontalAlignment="Left" Width="310" IsExpanded="True" Style="{DynamicResource TreeViewItemStyle2nd}">
                                                    			<TreeViewItem Header="TreeViewItem" Style="{DynamicResource TreeViewItemStyle2nd}"/>
                                                    		</TreeViewItem>
                                                    	</TreeViewItem>-->

                                                    </TreeView>
                                                </DockPanel>
                                            </TabItem>
                                            <TabItem x:Name="tab_Mgr_Group" Header="组" Style="{DynamicResource SimpleTabItem}" Width="10">
                                                <DockPanel>
                                                    <ListView x:Name="lst_Group" View="{StaticResource GroupView}" BorderThickness="0" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" Background="{x:Null}" Margin="0,6" ScrollViewer.HorizontalScrollBarVisibility="Hidden" ScrollViewer.VerticalScrollBarVisibility="Auto" Style="{DynamicResource ListViewStyleNormal}" />

                                                </DockPanel>
                                            </TabItem>
                                            <TabItem x:Name="tab_Mgr_Employee" Header="人员" Style="{DynamicResource SimpleTabItem}" Width="10">
                                                <DockPanel>
                                                    <ListView x:Name="lst_Employee"  View="{StaticResource EmployeeView}"  BorderThickness="0" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" Background="{x:Null}" Margin="0,6" Style="{DynamicResource ListViewStyleNormal}" ScrollViewer.HorizontalScrollBarVisibility="Hidden" />

                                                </DockPanel>
                                            </TabItem>
                                            <TabItem x:Name="tab_Mgr_Vehicle" Header="车辆" Style="{DynamicResource SimpleTabItem}" Width="10">
                                                <DockPanel>
                                                    <ListView x:Name="lst_Vehicle"  View="{StaticResource VehicleView}"  BorderThickness="0" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" Background="{x:Null}" Margin="0,6" Style="{DynamicResource ListViewStyleNormal}" ScrollViewer.HorizontalScrollBarVisibility="Hidden" />
                                                </DockPanel>
                                            </TabItem>
                                            <TabItem x:Name="tab_Mgr_Device" Header="设备" Style="{DynamicResource SimpleTabItem}" Margin="0,0,-2,0" Width="10">
                                                <DockPanel>
                                                    <ListView x:Name="lst_Radio" View="{StaticResource RadioView}"  BorderThickness="0" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" Background="{x:Null}" Margin="0,6" Style="{DynamicResource ListViewStyleNormal}" ScrollViewer.HorizontalScrollBarVisibility="Hidden" />

                                                </DockPanel>
                                            </TabItem>
                                        </TabControl>
                                    </Border>
                                </DockPanel>
                            </Border>
                            <Border BorderBrush="#FF0C0C0D" BorderThickness="1" Grid.Row="1" Margin="0" Background="#FF3B3B3D">
                                <DockPanel LastChildFill="False">
                                    <RadioButton x:Name="rad_Nav_Dispatch" Content="语音调度" Style="{DynamicResource RadioButtonMgr}" DockPanel.Dock="Top" GroupName="MainTab" IsChecked="True" Height="41" Foreground="{DynamicResource fbg}" BorderThickness="0,0,0,1" BorderBrush="#FF0C0C0D"/>
                                    <RadioButton x:Name="rad_Nav_Map" Content="地图" Style="{DynamicResource RadioButtonMgr}" DockPanel.Dock="Top" GroupName="MainTab" Height="41"  Foreground="{DynamicResource fbg}" BorderThickness="0,0,0,1" BorderBrush="#FF0C0C0D"/>
                                    <RadioButton x:Name="rad_Nav_Recording" Content="录音" Style="{DynamicResource RadioButtonMgr}" DockPanel.Dock="Top" GroupName="MainTab" Height="41" Foreground="{DynamicResource fbg}" BorderThickness="0,0,0,1" BorderBrush="#FF0C0C0D" Visibility="Collapsed"/>
                                    <RadioButton x:Name="rad_Nav_Report" Content="报表" Style="{DynamicResource RadioButtonMgr}" DockPanel.Dock="Top" GroupName="MainTab" Height="41" Foreground="{DynamicResource fbg}" BorderThickness="0" BorderBrush="#FF0C0C0D" Visibility="Collapsed"/>
                                </DockPanel>
                            </Border>
                            <GridSplitter x:Name="grdspl_Mgs_Nav" HorizontalAlignment="Stretch" Height="8" VerticalAlignment="Bottom" Margin="0" Background="#000C0103" d:IsLocked="True" d:IsHidden="True"/>
                        </Grid>
                        <Grid x:Name="grd_Disptch" Grid.Column="1" Margin="0">
                            <Grid.RowDefinitions>
                                <RowDefinition MinHeight="30"/>
                                <RowDefinition x:Name="grd_Row_Event" Height="173" MinHeight="31"/>
                            </Grid.RowDefinitions>

                            <Border BorderBrush="Black" BorderThickness="1" Margin="0" Padding="0" Background="#FF3B3B3D">
                                <DockPanel>
                                    <Path Data="M6.8333333,30 L178.16667,30" Height="1" Stretch="Fill" VerticalAlignment="Top" DockPanel.Dock="Top" Stroke="{DynamicResource BorderTop}" Margin="-0.5,0"/>
                                    <Border BorderBrush="#FF0F0F10" BorderThickness="0,0,0,1" Height="33" VerticalAlignment="Top" DockPanel.Dock="Top" Background="#FF242424">
                                        <DockPanel LastChildFill="False" Margin="0,0,0,3">
                                            <TextBlock TextWrapping="Wrap" Text="{Binding SelectedItem.Header, ElementName=tab_main}" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="13,0,0,0" Foreground="#FFC9CDD2" FontSize="14"/>
                                            <CheckBox x:Name="chk_MaxSize" Content="Max" VerticalAlignment="Center" ClipToBounds="True" DockPanel.Dock="Right" Margin="5,0" Style="{DynamicResource CheckBoxStyleMaxStatus}"/>
                                            <CheckBox x:Name="chk_MinIconView" Content="" VerticalAlignment="Center" ClipToBounds="True" DockPanel.Dock="Right" Style="{DynamicResource CheckBox-View-Style}" Visibility="{Binding IsChecked, Converter={StaticResource FalseHide}, ElementName=rad_Nav_Dispatch}" IsChecked="True"/>
                                        </DockPanel>
                                    </Border>
                                    <Border x:Name="bdr_MaskMainTab" BorderBrush="Black" BorderThickness="0" ClipToBounds="True" DockPanel.Dock="Top">
                                        <TabControl x:Name="tab_main" BorderThickness="0" Margin="0,-22,0,0" ClipToBounds="True" Style="{DynamicResource TabControlStyleNormal}">
                                            <TabControl.SelectedIndex>
                                                <MultiBinding  Converter="{StaticResource IndexFromRadio}" Mode="OneWay">
                                                    <Binding ElementName="rad_Nav_Dispatch" Path="IsChecked" />
                                                    <Binding ElementName="rad_Nav_Map" Path="IsChecked" />
                                                    <Binding ElementName="rad_Nav_Recording" Path="IsChecked" />
                                                    <Binding ElementName="rad_Nav_Report" Path="IsChecked" />
                                                </MultiBinding>
                                            </TabControl.SelectedIndex>
                                            <TabItem Header="语音调度" Style="{DynamicResource SimpleTabItem}" Width="20">
                                                <DockPanel>
                                                    <Grid>

                                                        <ListView x:Name="lst_dispatch"  BorderThickness="0"  ScrollViewer.VerticalScrollBarVisibility="Auto" Background="{x:Null}" VerticalContentAlignment="Top" MouseDoubleClick="lst_dispatch_MouseDoubleClick" View="{StaticResource IconView}" Margin="10,6,0,6" ScrollViewer.HorizontalScrollBarVisibility="Hidden" Style="{DynamicResource ListViewStyleNormal}">
                                                            <ListView.ContextMenu>
                                                                <ContextMenu Style="{DynamicResource ContextMenuStyleNormal}">
                                                                    <MenuItem x:Name="menu_FastListAddContact" Header="添加常用联系人" Style="{DynamicResource MenuItemStyle1}" Height="28" Foreground="White" FontSize="14" FontFamily="Hiragino Sans GB W3"/>
                                                                    <MenuItem x:Name="menu_FastListAddOperate" Header="添加快速操作" Style="{DynamicResource MenuItemStyle1}" Height="28" Foreground="White" FontSize="14" FontFamily="Hiragino Sans GB W3" />
                                                                </ContextMenu>
                                                            </ListView.ContextMenu>
                                                        </ListView>
                                                    </Grid>
                                                </DockPanel>
                                            </TabItem>
                                            <TabItem Header="地图" Style="{DynamicResource SimpleTabItem}" Width="20" d:IsHidden="True">
                                                <DockPanel>
                                                    <DockPanel DockPanel.Dock="Top">
                                                        <Grid  x:Name="MyWebGrid" Margin="0"/>
                                                    </DockPanel>
                                                </DockPanel>
                                            </TabItem>
                                            <TabItem Header="录音" Style="{DynamicResource SimpleTabItem}" d:IsHidden="True">
                                                <DockPanel>
                                                    <DockPanel LastChildFill="False" DockPanel.Dock="Top">
                                                    	<RadioButton Content="RadioButton" HorizontalAlignment="Left" Style="{DynamicResource RadioButtonStyleNav}" VerticalAlignment="Top" Foreground="#FFC9CDD2" Height="24" Padding="0"/>
                                                    </DockPanel>
                                                    <TreeViewItem Header="TreeViewItem" Height="112" Style="{DynamicResource TreeViewItemStyletest}" VerticalAlignment="Top">
                                                        <TreeViewItem.ContextMenu>
                                                            <ContextMenu/>
                                                        </TreeViewItem.ContextMenu>
                                                    </TreeViewItem>
                                                </DockPanel>
                                            </TabItem>
                                            <TabItem Header="报表" Style="{DynamicResource SimpleTabItem}" Width="20">
                                                <DockPanel>
                                                    <TabControl>
                                                        <TabItem Header="20161208.log">
                                                            <Grid Background="#FFE5E5E5">
                                                                <DataGrid x:Name="dat_Record" AutoGenerateColumns="False">
                                                                    <DataGrid.Columns>
                                                                        <DataGridTextColumn  Width="60" Binding="{Binding time}"  Header="日期"/>
                                                                        <DataGridTextColumn  Width="60" Binding="{Binding target}"  Header="目标"/>
                                                                        <DataGridTextColumn  Width="60" Binding="{Binding nat}"  Header="经度"/>
                                                                        <DataGridTextColumn  Width="60" Binding="{Binding lat}"  Header="纬度"/>
                                                                    </DataGrid.Columns>

                                                                </DataGrid>
                                                            </Grid>
                                                        </TabItem>
                                                        <TabItem Header="20161209.log">
                                                            <Grid Background="#FFE5E5E5"/>
                                                        </TabItem>
                                                        <TabItem Header="20161210.log" >
                                                            <Grid Background="#FFE5E5E5"/>
                                                        </TabItem>
                                                    </TabControl>
                                                </DockPanel>
                                            </TabItem>
                                        </TabControl>
                                    </Border>
                                </DockPanel>
                            </Border>
                            <Border BorderBrush="#FF0F0F10" BorderThickness="1" Grid.Row="1" Margin="0,8,0,0" Background="#FF3B3B3D">
                                <DockPanel>
                                    <Path Data="M6.8333333,30 L178.16667,30" Height="1" Stretch="Fill" VerticalAlignment="Top" DockPanel.Dock="Top" Stroke="{DynamicResource BorderTop}" Margin="-0.5,0"/>
                                    <Border BorderBrush="#FF0F0F10" BorderThickness="0,0,0,1" Height="30" DockPanel.Dock="Top" Background="#FF242424">
                                        <Label Content="事件记录" HorizontalAlignment="Left" VerticalAlignment="Center" Foreground="{DynamicResource fbg}"/>
                                    </Border>
                                    <Grid DockPanel.Dock="Top">
                                        <ListView x:Name="lst_Event" View="{StaticResource EventView}"  BorderThickness="0"  ScrollViewer.VerticalScrollBarVisibility="Auto" Background="{x:Null}" Margin="0,6" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Hidden" Style="{DynamicResource ListViewStyleNormal}" />

                                    </Grid>
                                </DockPanel>
                            </Border>
                            <GridSplitter x:Name="grdspl_Main_Event" HorizontalAlignment="Stretch" Height="8" VerticalAlignment="Top" Margin="0" Background="#00000000" Grid.Row="1" d:IsHidden="True" d:IsLocked="True"/>
                        </Grid>
                        <Grid x:Name="grd_Msg" Margin="8,-4,0,-4" Grid.Column="2">
                            <Grid.RowDefinitions>
                                <RowDefinition x:Name="grd_Row_Msg_Alarm" MinHeight="76"/>
                                <RowDefinition x:Name="grd_Row_Msg_ShortMsg" Height="42" MinHeight="42" />
                                <RowDefinition x:Name="grd_Row_Msg_Rx" Height="42" MinHeight="42" />
                                <RowDefinition x:Name="grd_Row_Msg_Job" Height="42" MinHeight="42"/>
                                <RowDefinition x:Name="grd_Row_Msg_Tracker" Height="42" MinHeight="42"/>
                                <RowDefinition  MaxHeight="0"/>
                            </Grid.RowDefinitions>
                            <Border  x:Name="bdr_Msg_Alarm" BorderBrush="#FF0F0F10" BorderThickness="1" Margin="0,4" Background="#FF3B3B3D">
                                <DockPanel>
                                    <Border BorderBrush="#FF242424" BorderThickness="0,0,0,1" Height="34" DockPanel.Dock="Top" Background="#FF242424">
                                        <Grid>
                                            <Path Data="M6.8333333,30 L178.16667,30" Height="1" Stretch="Fill" VerticalAlignment="Top" Stroke="{DynamicResource BorderTop}" Margin="-0.5,0"/>
                                            <Image HorizontalAlignment="Left" Height="18" VerticalAlignment="Center" Width="18" Margin="5,0,0,0" Source="/TrboX;component/resource/images/alarm_18_18.png" Visibility="Hidden"/>
                                            <TextBlock TextWrapping="Wrap"  VerticalAlignment="Center" Text="{Binding Items.Count, ElementName=lst_Alarm, Mode=OneWay, StringFormat=（共 \{0\} 条）}" Margin="60,0,0,0" HorizontalAlignment="Left" Foreground="{DynamicResource fbg}"/>
                                            <CheckBox x:Name="chk_MsgExp_Alarm" Content="报警信息"  IsChecked="True" Style="{DynamicResource CheckBoxStyleMsg}" BorderThickness="0" Foreground="{DynamicResource fbg}"/>
                                            <local:IconBtn x:Name="btn_ClearAlarmMsg"  Height="18" VerticalAlignment="Center" Margin="0,5,5,5" HorizontalAlignment="Right" Width="18" Normal="/TrboX;component/resource/images/msg_close_18_18_n.png" />
                                        </Grid>
                                    </Border>

                                    <Grid DockPanel.Dock="Top">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="119*"/>
                                            <ColumnDefinition Width="131*"/>
                                        </Grid.ColumnDefinitions>
                                        <ListView x:Name="lst_Alarm"  BorderThickness="0"  ScrollViewer.VerticalScrollBarVisibility="Auto" Background="{x:Null}" Margin="0,6" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Hidden" Grid.ColumnSpan="2" View="{StaticResource AlarmView}" Style="{DynamicResource ListViewStyleNormal}" />

                                    </Grid>
                                </DockPanel>
                            </Border>
                            <Border  x:Name="bdr_Msg_ShortMsg" BorderBrush="#FF0F0F10" BorderThickness="1" Margin="0,4" Grid.Row="1" Background="#FF3B3B3D">
                                <DockPanel>
                                    <Border BorderBrush="#FF242424" BorderThickness="0,0,0,1" Height="34" DockPanel.Dock="Top" Margin="0" Background="#FF242424">
                                        <Grid Margin="0">
                                            <Path Data="M6.8333333,30 L178.16667,30" Height="1" Stretch="Fill" VerticalAlignment="Top" DockPanel.Dock="Top" Stroke="{DynamicResource BorderTop}" Margin="-0.5,0"/>
                                            <TextBlock TextWrapping="Wrap"  VerticalAlignment="Center" DockPanel.Dock="Right" Text="{Binding Items.Count, ElementName=lst_ShortMsg, Mode=OneWay, StringFormat=（共 \{0\} 条）}" Margin="51,0,0,0" Foreground="{DynamicResource fbg}" HorizontalAlignment="Left"/>
                                            <CheckBox  x:Name="chk_MsgExp_ShortMsg" Content="短消息" Margin="0" Style="{DynamicResource CheckBoxStyleMsg}" BorderThickness="0" Foreground="{DynamicResource fbg}"/>
                                            <local:IconBtn x:Name="btn_ClearShortMsg"  Height="18" VerticalAlignment="Center" Margin="0,5.5,5,5.5" HorizontalAlignment="Right" Width="18" Normal="/TrboX;component/resource/images/msg_close_18_18_n.png" />
                                        </Grid>
                                    </Border>
                                    <Grid>
                                        <ListView x:Name="lst_ShortMsg" View="{StaticResource MsgView}" BorderThickness="0"  ScrollViewer.VerticalScrollBarVisibility="Auto" Background="{x:Null}" Margin="0,6" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Hidden" Style="{DynamicResource ListViewStyleNormal}" />


                                    </Grid>
                                </DockPanel>
                            </Border>
                            <Border  x:Name="bdr_Msg_Rx" BorderBrush="#FF0F0F10" BorderThickness="1" Margin="0,6" Grid.Row="2" Background="#FF3B3B3D">
                                <DockPanel>
                                    <Border BorderBrush="#FF242424" BorderThickness="0,0,0,1" Height="34" DockPanel.Dock="Top" Margin="0" Background="#FF242424">
                                        <Grid Margin="0">
                                            <Path Data="M6.8333333,30 L178.16667,30" Height="1" Stretch="Fill" VerticalAlignment="Top" DockPanel.Dock="Top" Stroke="{DynamicResource BorderTop}" Margin="-0.5,0"/>
                                            <TextBlock TextWrapping="Wrap"  VerticalAlignment="Center" DockPanel.Dock="Right" Text="{Binding Items.Count, ElementName=lst_Rx, Mode=OneWay, StringFormat=（共 \{0\} 条）}" Margin="60,0,0,0" HorizontalAlignment="Left" Foreground="{DynamicResource fbg}"/>
                                            <CheckBox  x:Name="chk_MsgExp_Rx" Content="被叫记录" Margin="0" Style="{DynamicResource CheckBoxStyleMsg}" BorderThickness="0" Foreground="{DynamicResource fbg}"/>
                                            <local:IconBtn x:Name="btn_ClearRxMsg"  Height="18" VerticalAlignment="Center" Margin="0,5.5,5,5.5" HorizontalAlignment="Right" Width="18" Normal="/TrboX;component/resource/images/msg_close_18_18_n.png" />
                                        </Grid>
                                    </Border>
                                    <Grid>
                                        <ListView x:Name="lst_Rx" View="{StaticResource RxView}"  BorderThickness="0"  ScrollViewer.VerticalScrollBarVisibility="Auto" Background="{x:Null}" Margin="0,6" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Hidden" Style="{DynamicResource ListViewStyleNormal}" >

                                        </ListView>
                                    </Grid>
                                </DockPanel>
                            </Border>
                            <Border  x:Name="bdr_Msg_Job" BorderBrush="#FF0F0F10" BorderThickness="1" Grid.Row="3" Margin="0,4" Background="#FF3B3B3D">
                                <DockPanel>
                                    <Border BorderBrush="#FF242424" BorderThickness="0,0,0,1" Height="34" Margin="0" DockPanel.Dock="Top" Background="#FF242424">
                                        <Grid Margin="0">
                                            <Path Data="M6.8333333,30 L178.16667,30" Height="1" Stretch="Fill" VerticalAlignment="Top" DockPanel.Dock="Top" Stroke="{DynamicResource BorderTop}" Margin="-0.5,0"/>
                                            <TextBlock TextWrapping="Wrap"  VerticalAlignment="Center" DockPanel.Dock="Right" Text="{Binding Items.Count, ElementName=lst_Job, Mode=OneWay, StringFormat=（共 \{0\} 条）}" Margin="42,0,0,0" HorizontalAlignment="Left" Foreground="{DynamicResource fbg}"/>
                                            <CheckBox  x:Name="chk_MsgExp_Job" Content="工单" Margin="0" Style="{DynamicResource CheckBoxStyleMsg}" BorderThickness="0" Foreground="{DynamicResource fbg}"/>
                                            <local:IconBtn x:Name="btn_ClearJobMsg"  Height="18" VerticalAlignment="Center" Margin="0,5.5,5,5.5" HorizontalAlignment="Right" Width="18" Normal="/TrboX;component/resource/images/msg_close_18_18_n.png" />
                                        </Grid>
                                    </Border>
                                    <Grid>
                                        <ListView x:Name="lst_Job" View="{StaticResource JobView}" BorderThickness="0"  ScrollViewer.VerticalScrollBarVisibility="Auto" Background="{x:Null}" Margin="0,6" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Hidden" Style="{DynamicResource ListViewStyleNormal}" >

                                        </ListView>
                                    </Grid>
                                </DockPanel>
                            </Border>
                            <Border x:Name="bdr_Msg_Tracker" BorderBrush="#FF0F0F10" BorderThickness="1" Grid.Row="4" Margin="0,4" Background="#FF3B3B3D">
                                <DockPanel>
                                    <Border BorderBrush="#FF242424" BorderThickness="0,0,0,1" Height="34" DockPanel.Dock="Top" Margin="0" Background="#FF242424">
                                        <Grid Margin="0">
                                            <Path Data="M6.8333333,30 L178.16667,30" Height="1" Stretch="Fill" VerticalAlignment="Top" DockPanel.Dock="Top" Stroke="{DynamicResource BorderTop}" Margin="-0.5,0"/>
                                            <TextBlock TextWrapping="Wrap"  VerticalAlignment="Center" DockPanel.Dock="Right" Text="{Binding Items.Count, ElementName=lst_Tracker, Mode=OneWay, StringFormat=（共 \{0\} 条）}" Margin="42,0,0,0" HorizontalAlignment="Left" Foreground="{DynamicResource fbg}"/>
                                            <CheckBox  x:Name="chk_MsgExp_Tracker" Content="巡更" Margin="0" Style="{DynamicResource CheckBoxStyleMsg}" BorderThickness="0" Background="{x:Null}" Foreground="{DynamicResource fbg}"/>
                                            <local:IconBtn x:Name="btn_ClearTrackerMsg"  Height="18" VerticalAlignment="Center" Margin="0,5.5,5,5.5" HorizontalAlignment="Right" Width="18" Normal="/TrboX;component/resource/images/msg_close_18_18_n.png" />
                                        </Grid>
                                    </Border>
                                    <Grid>
                                        <ListView x:Name="lst_Tracker" View="{StaticResource TrackerView}" BorderThickness="0"  ScrollViewer.VerticalScrollBarVisibility="Auto" Background="{x:Null}" Margin="0,6" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Hidden" Style="{DynamicResource ListViewStyleNormal}" >

                                        </ListView>
                                    </Grid>
                                </DockPanel>
                            </Border>
                            <GridSplitter x:Name="grdspl_Msg_Row0" HorizontalAlignment="Stretch" Height="8" VerticalAlignment="Bottom" Background="#00000000" Margin="0,0,0,-2" Visibility="Hidden"/>
                            <GridSplitter x:Name="grdspl_Msg_Row1" HorizontalAlignment="Stretch" Height="8" VerticalAlignment="Bottom" Grid.Row="1" Background="#00000000" Margin="0,0,0,-2" Visibility="Hidden"/>
                            <GridSplitter x:Name="grdspl_Msg_Row2" HorizontalAlignment="Stretch" Height="8" VerticalAlignment="Bottom" Grid.Row="2" Background="#00000000" Margin="0,0,0,-2" Visibility="Hidden"/>
                            <GridSplitter x:Name="grdspl_Msg_Row3" HorizontalAlignment="Stretch" Height="8" VerticalAlignment="Bottom" Grid.Row="3" Background="#00000000" Margin="0,0,0,-2" Visibility="Hidden"/>
                        </Grid>
                        <GridSplitter x:Name="grdspl_Nav_Main" Width="8" Background="#00110101" Margin="0" d:IsHidden="True" d:IsLocked="True"/>
                        <GridSplitter x:Name="grdspl_Main_Msg" HorizontalAlignment="Left" Width="8" Grid.Column="2" Background="#00110101" Margin="0" d:IsHidden="True" d:IsLocked="True" />
                    </Grid>
                </Border>
            </Grid>
        </DockPanel>

    </Grid>
</local:MyWindow>
